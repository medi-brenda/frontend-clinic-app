{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import{useNavigation}from'@react-navigation/native';import{observer}from'mobx-react';import{Container}from'native-base';import React,{useEffect,useState}from'react';import{useTranslation}from'react-i18next';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import{goSelectDoctor}from\"../../actions/app\";import{getBenefitsByClinicInsurer}from\"../../actions/config\";import List from\"../../components/list\";import TitleBar from\"../../components/titleBar\";import{useStores}from\"../../stores\";import{translate}from\"../../utils/string\";import ErrorPage from\"../error\";import Loading from\"../loading\";import PhoneCall from\"../../components/phoneCall\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SelectBenefitPage=observer(function(){var stores=useStores();var _useTranslation=useTranslation(),i18n=_useTranslation.i18n,t=_useTranslation.t;var navigation=useNavigation();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),inited=_useState4[0],setInited=_useState4[1];var currentTab=stores.appStore.currentTab;var benefits=stores.configStore.benefits;useEffect(function(){init();},[]);var init=function _callee(){var errMsg;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(getBenefitsByClinicInsurer({stores:stores}));case 2:errMsg=_context.sent;if(!errMsg){_context.next=5;break;}return _context.abrupt(\"return\",setError(errMsg));case 5:return _context.abrupt(\"return\",setInited(true));case 6:case\"end\":return _context.stop();}}},null,null,null,Promise);};var onItemSelect=function onItemSelect(item){goSelectDoctor({stores:stores,navigation:navigation,benefit:item.code,benefitName:i18n.language=='chi'?item.nameChi:item.nameEn});};return _jsxs(Container,{children:[_jsx(TitleBar,{title:t(currentTab+\".SelectBenefit\"),onBack:function onBack(){navigation.goBack();}}),error?_jsx(ErrorPage,{title:error,onRetry:init}):!inited?_jsx(Loading,{}):_jsxs(_Fragment,{children:[_jsx(Text,{style:styleSheet.breadcrumb,children:t(currentTab+\".Selected\")+': '+stores.dataStore.values.insurerName}),_jsx(List,{data:benefits,icon:\"ios-arrow-forward\",onPress:onItemSelect,formatText:function formatText(item){return translate(item,i18n)+\"(\"+item.code+\")\";}})]}),_jsx(PhoneCall,{})]});});var styleSheet=StyleSheet.create({breadcrumb:{marginLeft:20,marginTop:5,color:\"#777777\"}});export default SelectBenefitPage;","map":{"version":3,"names":["useNavigation","observer","Container","React","useEffect","useState","useTranslation","goSelectDoctor","getBenefitsByClinicInsurer","List","TitleBar","useStores","translate","ErrorPage","Loading","PhoneCall","SelectBenefitPage","stores","i18n","t","navigation","error","setError","inited","setInited","currentTab","appStore","benefits","configStore","init","errMsg","onItemSelect","item","benefit","code","benefitName","language","nameChi","nameEn","goBack","styleSheet","breadcrumb","dataStore","values","insurerName","StyleSheet","create","marginLeft","marginTop","color"],"sources":["I:/Workspace/mediWS/mccWS/frontend-clinic-app/src/pages/selectBenefits/index.tsx"],"sourcesContent":["import { useNavigation } from '@react-navigation/native';\r\nimport { observer } from 'mobx-react';\r\nimport { Container, View } from 'native-base';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Alert, StyleSheet, Text } from 'react-native';\r\nimport { goSelectDoctor } from '../../actions/app';\r\nimport { getBenefitsByClinicInsurer } from '../../actions/config';\r\nimport List from '../../components/list';\r\nimport TitleBar from '../../components/titleBar';\r\nimport { Option } from '../../models/option';\r\nimport { useStores } from '../../stores';\r\nimport { translate } from '../../utils/string';\r\nimport ErrorPage from '../error';\r\nimport Loading from '../loading';\r\nimport PhoneCall from \"../../components/phoneCall\";\r\nimport styles from '../../styles';\r\nimport { I18nManager } from 'react-native';\r\n\r\nconst SelectBenefitPage = observer(() => {\r\n    const stores = useStores();\r\n    const { i18n, t } = useTranslation();\r\n    const navigation = useNavigation();\r\n\r\n    const [error, setError] = useState('');\r\n    const [inited, setInited] = useState(false);\r\n\r\n    const { currentTab } = stores.appStore;\r\n    const { benefits } = stores.configStore;\r\n\r\n    useEffect(() => {\r\n        init();\r\n    }, []);\r\n\r\n    const init = async () => {\r\n        const errMsg = await getBenefitsByClinicInsurer({ stores });\r\n        if (errMsg) {\r\n            return setError(errMsg);\r\n        }\r\n        return setInited(true);\r\n    }    \r\n\r\n    const onItemSelect = (item: Option) => {\r\n        goSelectDoctor({\r\n            stores,\r\n            navigation,\r\n            benefit: item.code,\r\n            benefitName: i18n.language=='chi'?item.nameChi:item.nameEn            \r\n        });\r\n    }\r\n    return (\r\n        <Container>\r\n            <TitleBar\r\n                title={t(`${currentTab}.SelectBenefit`)}\r\n                onBack={() => {\r\n                    navigation.goBack();\r\n                }}\r\n            />\r\n            {\r\n                error ?\r\n                    <ErrorPage title={error} onRetry={init} /> :\r\n                    !inited ? <Loading /> :\r\n                    <>\r\n                        <Text style={styleSheet.breadcrumb}>{t(`${currentTab}.Selected`)+': '+stores.dataStore.values.insurerName}</Text>\r\n                        <List\r\n                            data={benefits}\r\n                            icon='ios-arrow-forward'\r\n                            onPress={onItemSelect}\r\n                            formatText={(item) => `${translate(item, i18n)}(${item.code})`}\r\n                        />\r\n                    </>\r\n            }\r\n\r\n            <PhoneCall/>\r\n        </Container>\r\n    )\r\n});\r\n\r\nconst styleSheet = StyleSheet.create({\r\n    breadcrumb:{\r\n        marginLeft: 20,\r\n        marginTop: 5,\r\n        color: \"#777777\"\r\n    }\r\n});\r\n\r\nexport default SelectBenefitPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}