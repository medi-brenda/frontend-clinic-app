{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import React,{useState}from'react';import Dimensions from\"react-native-web/dist/exports/Dimensions\";import Image from\"react-native-web/dist/exports/Image\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Alert from\"react-native-web/dist/exports/Alert\";import{Button}from'native-base';import*as ImagePicker from'expo-image-picker';import styles from\"../../styles\";import{useTranslation}from'react-i18next';import*as Permissions from'expo-permissions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var _Dimensions$get=Dimensions.get('window'),width=_Dimensions$get.width;var maxImageWidth=width*4/9;var maxImageHeight=width*4/9;var InputImage=function InputImage(_ref){var id=_ref.id,title=_ref.title,values=_ref.values,warning=_ref.warning,validate=_ref.validate,onChange=_ref.onChange;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),ratio=_useState2[0],setRatio=_useState2[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var handleUpload=function _callee(){var permission,result;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(Permissions.getAsync(Permissions.CAMERA_ROLL));case 2:permission=_context.sent;if(!(permission.status!==\"granted\")){_context.next=7;break;}_context.next=6;return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA_ROLL));case 6:permission=_context.sent;case 7:if(!(permission.status!==\"granted\")){_context.next=10;break;}Alert.alert(t('Register.EntitlePermission'));return _context.abrupt(\"return\");case 10:_context.next=12;return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({mediaTypes:ImagePicker.MediaTypeOptions.All,allowsEditing:true,quality:1}));case 12:result=_context.sent;if(!result.cancelled){onChange(id,result.uri);setRatio(result.width/result.height);}case 14:case\"end\":return _context.stop();}}},null,null,null,Promise);};var handleTakePhoto=function _callee2(){var permission,result;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(Permissions.getAsync(Permissions.CAMERA));case 2:permission=_context2.sent;if(!(permission.status!==\"granted\")){_context2.next=7;break;}_context2.next=6;return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA));case 6:permission=_context2.sent;case 7:if(!(permission.status!==\"granted\")){_context2.next=10;break;}Alert.alert(t('Register.EntitlePermission'));return _context2.abrupt(\"return\");case 10:_context2.next=12;return _regeneratorRuntime.awrap(ImagePicker.launchCameraAsync({mediaTypes:ImagePicker.MediaTypeOptions.Images,allowsEditing:true,quality:1}));case 12:result=_context2.sent;if(!result.cancelled){onChange(id,result.uri);setRatio(result.width/result.height);}case 14:case\"end\":return _context2.stop();}}},null,null,null,Promise);};var isError=!validate(values[id]);return _jsxs(_Fragment,{children:[_jsx(Text,{style:styles.reg_field_title,children:title}),!values[id]?_jsx(Text,{style:styleSheet.warning,children:warning}):null,_jsxs(View,{style:styleSheet.image,children:[values&&values[id]?_jsx(Image,{style:{marginBottom:15,width:ratio>1?maxImageWidth:maxImageWidth*ratio,height:ratio<1?maxImageHeight:maxImageHeight*ratio},source:{uri:values[id]}}):null,_jsx(Button,{rounded:true,block:true,style:styles.button_auth,onPress:handleTakePhoto,children:_jsx(Text,{style:styleSheet.button,children:t('Register.TakePhoto')})})]})]});};var styleSheet=StyleSheet.create({warning:{fontSize:14,marginLeft:10,marginRight:5,marginBottom:25,color:'red'},image:{justifyContent:'center',alignItems:'center',marginBottom:20},button:{color:'white',fontSize:16}});export default InputImage;","map":{"version":3,"names":["React","useState","Button","ImagePicker","styles","useTranslation","Permissions","Dimensions","get","width","maxImageWidth","maxImageHeight","InputImage","id","title","values","warning","validate","onChange","ratio","setRatio","t","handleUpload","getAsync","CAMERA_ROLL","permission","status","askAsync","Alert","alert","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","quality","result","cancelled","uri","height","handleTakePhoto","CAMERA","launchCameraAsync","Images","isError","reg_field_title","styleSheet","image","marginBottom","button_auth","button","StyleSheet","create","fontSize","marginLeft","marginRight","color","justifyContent","alignItems"],"sources":["I:/Workspace/mediWS/mccWS/frontend-clinic-app/src/components/inputImage/index.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nimport { Dimensions, Image, View, Text, StyleSheet, Alert } from 'react-native';\r\nimport { Button, Container } from 'native-base';\r\nimport { Col, Row, Grid } from 'react-native-easy-grid';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport styles from '../../styles';\r\nimport { useTranslation } from 'react-i18next';\r\nimport * as Permissions from 'expo-permissions';\r\n\r\nconst { width } = Dimensions.get('window');\r\n\r\nconst maxImageWidth = (width * 4) / 9;\r\nconst maxImageHeight = (width * 4) / 9;\r\n\r\ntype InputImageProp = {\r\n    id: string,\r\n    title: string,\r\n    values: any,\r\n    warning: string,\r\n    validate: (value: any) => boolean,\r\n    onChange: (id: string, value: any) => void\r\n}\r\n\r\nconst InputImage = ({ id, title, values, warning, validate, onChange }: InputImageProp) => {\r\n    const [ratio, setRatio] = useState(1);\r\n    const { t } = useTranslation();\r\n\r\n    const handleUpload = async () => {\r\n\r\n        let permission = await Permissions.getAsync(Permissions.CAMERA_ROLL);\r\n        if (permission.status !== \"granted\") permission = await Permissions.askAsync(Permissions.CAMERA_ROLL);\r\n        \r\n        if (permission.status !== \"granted\") {\r\n            Alert.alert(t('Register.EntitlePermission'));\r\n            return;\r\n        }\r\n\r\n        const result = await ImagePicker.launchImageLibraryAsync({\r\n            mediaTypes: ImagePicker.MediaTypeOptions.All,\r\n            allowsEditing: true,\r\n            quality: 1,\r\n        });\r\n\r\n        if (!result.cancelled) {\r\n            onChange(id, result.uri);\r\n            setRatio(result.width / result.height);\r\n        }\r\n    }\r\n\r\n    const handleTakePhoto = async () => {\r\n        let permission = await Permissions.getAsync(Permissions.CAMERA);\r\n        if (permission.status !== \"granted\") permission = await Permissions.askAsync(Permissions.CAMERA);\r\n        \r\n        if (permission.status !== \"granted\") {\r\n            Alert.alert(t('Register.EntitlePermission'));\r\n            return;\r\n        }\r\n\r\n        const result = await ImagePicker.launchCameraAsync({\r\n            mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n            allowsEditing: true,\r\n            quality: 1,\r\n        });\r\n\r\n        if (!result.cancelled) {\r\n            onChange(id, result.uri);\r\n            setRatio(result.width / result.height);\r\n        }\r\n    }\r\n\r\n    const isError = !validate(values[id]);\r\n\r\n    return (\r\n        <>\r\n            <Text style={styles.reg_field_title}>{title}</Text>\r\n            {\r\n                !values[id] ? (\r\n                    <Text style={styleSheet.warning}>{warning}</Text>\r\n                ) : null\r\n            }\r\n            <View style={styleSheet.image}>\r\n                {\r\n                    values && values[id] ? (\r\n                        <Image\r\n                            style={{\r\n                                marginBottom: 15,\r\n                                width: ratio > 1 ? maxImageWidth : maxImageWidth * ratio,\r\n                                height: ratio < 1 ? maxImageHeight : maxImageHeight * ratio\r\n                            }}\r\n                            source={{\r\n                                uri: values[id]\r\n                            }}\r\n                        />\r\n                    ) : null\r\n                }\r\n\r\n                \r\n                {/* <Button\r\n                    rounded\r\n                    block\r\n                    style={styles.button_auth}\r\n                    onPress={handleUpload}\r\n                >\r\n                    <Text style={styleSheet.button}>{t('Register.Upload')}</Text>\r\n                </Button> */}\r\n                <Button\r\n                    rounded\r\n                    block\r\n                    style={styles.button_auth}\r\n                    onPress={handleTakePhoto}\r\n                >\r\n                    <Text style={styleSheet.button}>{t('Register.TakePhoto')}</Text>\r\n                </Button>\r\n            </View>\r\n        </>\r\n    )\r\n}\r\n\r\nconst styleSheet = StyleSheet.create({\r\n    warning: {\r\n        fontSize: 14,\r\n        marginLeft: 10,\r\n        marginRight: 5,\r\n        marginBottom: 25,\r\n        color: 'red',\r\n    },\r\n    image: {\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        marginBottom: 20,\r\n    },\r\n    button: {\r\n        color: 'white',\r\n        fontSize: 16\r\n    }\r\n})\r\n\r\nexport default InputImage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}