{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import{useNavigation}from'@react-navigation/native';import{observer}from'mobx-react';import{Container,Switch,Text,View}from'native-base';import React,{useState,useRef,useEffect}from'react';import{useTranslation}from'react-i18next';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import{ScrollView}from'react-native-gesture-handler';import OPModal from\"../../components/opModal\";import TitleBar from\"../../components/titleBar\";import{useStores}from\"../../stores\";import{ListItem}from\"react-native-elements\";import*as WebBrowser from\"expo-web-browser\";import MCCButton from\"../../components/mccButton\";import{changeLang,logout}from\"../../actions/app\";import*as Notifications from'expo-notifications';import PhoneCall from\"../../components/phoneCall\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SettingPage=observer(function(){var _useTranslation=useTranslation(),i18n=_useTranslation.i18n,t=_useTranslation.t;var navigation=useNavigation();var stores=useStores();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),authAction=_useState2[0],setAuthoAction=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showOpModal=_useState4[0],setShowOpModal=_useState4[1];var notificationListener=useRef();var responseListener=useRef();var handlerNotificationReceived=function handlerNotificationReceived(notification){if(notification.origin==='selected'){}};useEffect(function(){responseListener.current=Notifications.addNotificationResponseReceivedListener(function(response){var page=response.notification.request.content.data.page;navigation.navigate(\"Home\",{screen:page});});notificationListener.current=Notifications.addNotificationReceivedListener(handlerNotificationReceived);return function(){Notifications.removeNotificationSubscription(responseListener);};},[]);var openOpModal=function openOpModal(action){setAuthoAction(action);setShowOpModal(true);};var onOpModalDismiss=function onOpModalDismiss(password){setShowOpModal(false);if(password){switch(authAction){case'settings':return navigation.navigate('SettingDisplay');}}};var onChangeLange=function onChangeLange(){changeLang(i18n);};var onLogout=function onLogout(){logout({stores:stores,navigation:navigation,i18n:i18n});};return _jsxs(Container,{children:[_jsx(TitleBar,{title:t('Others.display_settings'),onBack:function onBack(){return navigation.reset({index:0,routes:[{name:'Home'}]});}}),_jsx(OPModal,{show:showOpModal,onDismiss:onOpModalDismiss}),_jsxs(ScrollView,{children:[_jsx(ListItem,{title:t('Others.ST1'),leftIcon:{name:\"account-circle\"},onPress:function onPress(){navigation.navigate('Profile');},bottomDivider:true,chevron:true}),_jsx(ListItem,{title:t('Others.ST2'),leftIcon:{name:\"info-outline\"},onPress:function onPress(){navigation.navigate('AboutUs');},bottomDivider:true,chevron:true}),_jsx(ListItem,{title:t('Others.ST3'),leftIcon:{name:\"people\"},onPress:function onPress(){WebBrowser.openBrowserAsync(\"https://web2.prod.mediconcen.com/m-term_and_agreement.php\");},bottomDivider:true,chevron:true}),_jsx(ListItem,{title:t('Others.ST10'),leftIcon:{name:\"insert-drive-file\"},onPress:function onPress(){WebBrowser.openBrowserAsync(\"https://web2.prod.mediconcen.com/m-service_agreement.php\");},bottomDivider:true,chevron:true}),_jsx(ListItem,{title:t('Others.ST4'),leftIcon:{name:\"lock-outline\"},onPress:function onPress(){WebBrowser.openBrowserAsync(\"https://web2.prod.mediconcen.com/m-pics.php\");},bottomDivider:true,chevron:true}),_jsx(ListItem,{title:t('Others.ST11'),leftIcon:{name:\"lock-outline\"},onPress:function onPress(){navigation.navigate('ChangePassword');},bottomDivider:true,chevron:true}),_jsx(ListItem,{title:t('Others.ST7'),leftIcon:{name:\"language\"},bottomDivider:true,rightElement:_jsxs(_Fragment,{children:[_jsx(Text,{children:\"En\"}),_jsx(Switch,{value:i18n.language!=='en',onValueChange:onChangeLange}),_jsx(Text,{children:\"\\u7E41\"})]})}),_jsx(ListItem,{title:t('Others.display_settings'),leftIcon:{name:\"settings\"},onPress:function onPress(){openOpModal('settings');},bottomDivider:true,chevron:true}),_jsx(View,{style:styleSheet.marginTop,children:_jsx(MCCButton,{onPress:onLogout,text:t('Others.ST8')})})]}),_jsx(PhoneCall,{})]});});var styleSheet=StyleSheet.create({marginTop:{marginTop:25}});export default SettingPage;","map":{"version":3,"names":["useNavigation","observer","Container","Switch","Text","View","React","useState","useRef","useEffect","useTranslation","ScrollView","OPModal","TitleBar","useStores","ListItem","WebBrowser","MCCButton","changeLang","logout","Notifications","PhoneCall","SettingPage","i18n","t","navigation","stores","authAction","setAuthoAction","showOpModal","setShowOpModal","notificationListener","responseListener","handlerNotificationReceived","notification","origin","current","addNotificationResponseReceivedListener","response","page","request","content","data","navigate","screen","addNotificationReceivedListener","removeNotificationSubscription","openOpModal","action","onOpModalDismiss","password","onChangeLange","onLogout","reset","index","routes","name","openBrowserAsync","language","styleSheet","marginTop","StyleSheet","create"],"sources":["I:/Workspace/mediWS/mccWS/frontend-clinic-app/src/pages/setting/index.tsx"],"sourcesContent":["import { useNavigation } from '@react-navigation/native';\r\nimport { observer } from 'mobx-react';\r\nimport { Container, Switch, Text, View } from 'native-base';\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { StyleSheet } from 'react-native';\r\nimport { ScrollView } from 'react-native-gesture-handler';\r\nimport OPModal from '../../components/opModal';\r\nimport TitleBar from '../../components/titleBar';\r\nimport { useStores } from '../../stores';\r\nimport { ListItem } from \"react-native-elements\";\r\nimport * as WebBrowser from \"expo-web-browser\";\r\nimport MCCButton from '../../components/mccButton';\r\nimport { changeLang, logout } from '../../actions/app';\r\nimport * as Notifications from 'expo-notifications';\r\nimport PhoneCall from \"../../components/phoneCall\";\r\n\r\nconst SettingPage = observer(() => {\r\n    const { i18n, t } = useTranslation();\r\n    const navigation = useNavigation();\r\n    const stores = useStores();\r\n\r\n    const [authAction, setAuthoAction] = useState('');\r\n    const [showOpModal, setShowOpModal] = useState(false);\r\n\r\n    const notificationListener: any = useRef<any>();\r\n    const responseListener: any = useRef<any>();\r\n\r\n    const handlerNotificationReceived = (notification:any) => {\r\n        if(notification.origin === 'selected'){\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        responseListener.current = Notifications.addNotificationResponseReceivedListener(response => {\r\n            const page:any = response.notification.request.content.data.page;\r\n            navigation.navigate(\"Home\", {screen: page});\r\n        });\r\n\r\n        notificationListener.current = Notifications.addNotificationReceivedListener(handlerNotificationReceived);\r\n\r\n        return () => {\r\n            Notifications.removeNotificationSubscription(responseListener);\r\n        };\r\n\r\n    }, []);\r\n\r\n    const openOpModal = (action: string) => {\r\n        setAuthoAction(action);\r\n        setShowOpModal(true);\r\n    }\r\n\r\n    const onOpModalDismiss = (password: string) => {\r\n        setShowOpModal(false);\r\n        if (password) {\r\n            switch (authAction) {\r\n                case 'settings':\r\n                    return navigation.navigate('SettingDisplay');\r\n            }\r\n        }\r\n    }\r\n\r\n    const onChangeLange = () => {\r\n        changeLang(i18n);\r\n    }\r\n\r\n    const onLogout = () => {\r\n        logout({ stores, navigation, i18n });\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <TitleBar\r\n                title={t('Others.display_settings')}\r\n                onBack={() =>\r\n                    navigation.reset({\r\n                        index: 0,\r\n                        routes: [{ name: 'Home' }]\r\n                    })\r\n                }\r\n            />\r\n            <OPModal\r\n                show={showOpModal}\r\n                onDismiss={onOpModalDismiss}\r\n            />\r\n            <ScrollView>\r\n                <ListItem\r\n                    title={t('Others.ST1')}\r\n                    leftIcon={{ name: \"account-circle\" }}\r\n                    onPress={() => {\r\n                        navigation.navigate('Profile');\r\n                    }}\r\n                    bottomDivider\r\n                    chevron\r\n                />\r\n                <ListItem\r\n                    title={t('Others.ST2')}\r\n                    leftIcon={{ name: \"info-outline\" }}\r\n                    onPress={() => {\r\n                        navigation.navigate('AboutUs');\r\n                    }}\r\n                    bottomDivider\r\n                    chevron\r\n                />\r\n                <ListItem\r\n                    title={t('Others.ST3')}\r\n                    leftIcon={{ name: \"people\" }}\r\n                    onPress={() => {\r\n                        WebBrowser.openBrowserAsync(\r\n                            \"https://web2.prod.mediconcen.com/m-term_and_agreement.php\"\r\n                        );\r\n                    }}\r\n                    bottomDivider\r\n                    chevron\r\n                />\r\n                <ListItem\r\n                    title={t('Others.ST10')}\r\n                    leftIcon={{ name: \"insert-drive-file\" }}\r\n                    onPress={() => {\r\n                        WebBrowser.openBrowserAsync(\r\n                            \"https://web2.prod.mediconcen.com/m-service_agreement.php\"\r\n                        );\r\n                    }}\r\n                    bottomDivider\r\n                    chevron\r\n                />\r\n                <ListItem\r\n                    title={t('Others.ST4')}\r\n                    leftIcon={{ name: \"lock-outline\" }}\r\n                    onPress={() => {\r\n                        WebBrowser.openBrowserAsync(\r\n                            \"https://web2.prod.mediconcen.com/m-pics.php\"\r\n                        );\r\n                    }}\r\n                    bottomDivider\r\n                    chevron\r\n                />\r\n\r\n                <ListItem\r\n                    title={t('Others.ST11')}\r\n                    leftIcon={{ name: \"lock-outline\" }}\r\n                    onPress={() => {\r\n                        navigation.navigate('ChangePassword');\r\n                    }}\r\n                    bottomDivider\r\n                    chevron\r\n                />\r\n\r\n                <ListItem\r\n                    title={t('Others.ST7')}\r\n                    leftIcon={{ name: \"language\" }}\r\n                    bottomDivider\r\n                    rightElement={\r\n                        <>\r\n                            <Text>En</Text>\r\n                            <Switch\r\n                                value={i18n.language !== 'en'}\r\n                                onValueChange={onChangeLange}\r\n                            />\r\n                            <Text>繁</Text>\r\n                        </>\r\n                    }\r\n                />\r\n\r\n\r\n                <ListItem\r\n                    title={t('Others.display_settings')}\r\n                    leftIcon={{ name: \"settings\" }}\r\n                    onPress={() => {\r\n                        openOpModal('settings');\r\n                    }}\r\n                    bottomDivider\r\n                    chevron\r\n                />\r\n                <View style={styleSheet.marginTop}>\r\n                    <MCCButton\r\n                        onPress={onLogout}\r\n                        text={t('Others.ST8')}\r\n                    />\r\n                </View>\r\n            </ScrollView>\r\n\r\n\r\n            <PhoneCall/>\r\n        </Container>\r\n    )\r\n});\r\n\r\nconst styleSheet = StyleSheet.create({\r\n    marginTop: {\r\n        marginTop: 25\r\n    }\r\n});\r\n\r\nexport default SettingPage;\r\n"],"mappings":"iEAAA,OAASA,aAAT,KAA8B,0BAA9B,CACA,OAASC,QAAT,KAAyB,YAAzB,CACA,OAASC,SAAT,CAAoBC,MAApB,CAA4BC,IAA5B,CAAkCC,IAAlC,KAA8C,aAA9C,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,MAA1B,CAAkCC,SAAlC,KAAmD,OAAnD,CACA,OAASC,cAAT,KAA+B,eAA/B,C,iEAEA,OAASC,UAAT,KAA2B,8BAA3B,CACA,MAAOC,CAAAA,OAAP,gCACA,MAAOC,CAAAA,QAAP,iCACA,OAASC,SAAT,oBACA,OAASC,QAAT,KAAyB,uBAAzB,CACA,MAAO,GAAKC,CAAAA,UAAZ,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,SAAP,kCACA,OAASC,UAAT,CAAqBC,MAArB,yBACA,MAAO,GAAKC,CAAAA,aAAZ,KAA+B,oBAA/B,CACA,MAAOC,CAAAA,SAAP,kC,6IAEA,GAAMC,CAAAA,WAAW,CAAGrB,QAAQ,CAAC,UAAM,CAC/B,oBAAoBS,cAAc,EAAlC,CAAQa,IAAR,iBAAQA,IAAR,CAAcC,CAAd,iBAAcA,CAAd,CACA,GAAMC,CAAAA,UAAU,CAAGzB,aAAa,EAAhC,CACA,GAAM0B,CAAAA,MAAM,CAAGZ,SAAS,EAAxB,CAEA,cAAqCP,QAAQ,CAAC,EAAD,CAA7C,wCAAOoB,UAAP,eAAmBC,cAAnB,eACA,eAAsCrB,QAAQ,CAAC,KAAD,CAA9C,yCAAOsB,WAAP,eAAoBC,cAApB,eAEA,GAAMC,CAAAA,oBAAyB,CAAGvB,MAAM,EAAxC,CACA,GAAMwB,CAAAA,gBAAqB,CAAGxB,MAAM,EAApC,CAEA,GAAMyB,CAAAA,2BAA2B,CAAG,QAA9BA,CAAAA,2BAA8B,CAACC,YAAD,CAAsB,CACtD,GAAGA,YAAY,CAACC,MAAb,GAAwB,UAA3B,CAAsC,CACrC,CACJ,CAHD,CAKA1B,SAAS,CAAC,UAAM,CACZuB,gBAAgB,CAACI,OAAjB,CAA2BhB,aAAa,CAACiB,uCAAd,CAAsD,SAAAC,QAAQ,CAAI,CACzF,GAAMC,CAAAA,IAAQ,CAAGD,QAAQ,CAACJ,YAAT,CAAsBM,OAAtB,CAA8BC,OAA9B,CAAsCC,IAAtC,CAA2CH,IAA5D,CACAd,UAAU,CAACkB,QAAX,CAAoB,MAApB,CAA4B,CAACC,MAAM,CAAEL,IAAT,CAA5B,EACH,CAH0B,CAA3B,CAKAR,oBAAoB,CAACK,OAArB,CAA+BhB,aAAa,CAACyB,+BAAd,CAA8CZ,2BAA9C,CAA/B,CAEA,MAAO,WAAM,CACTb,aAAa,CAAC0B,8BAAd,CAA6Cd,gBAA7C,EACH,CAFD,CAIH,CAZQ,CAYN,EAZM,CAAT,CAcA,GAAMe,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,MAAD,CAAoB,CACpCpB,cAAc,CAACoB,MAAD,CAAd,CACAlB,cAAc,CAAC,IAAD,CAAd,CACH,CAHD,CAKA,GAAMmB,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,QAAD,CAAsB,CAC3CpB,cAAc,CAAC,KAAD,CAAd,CACA,GAAIoB,QAAJ,CAAc,CACV,OAAQvB,UAAR,EACI,IAAK,UAAL,CACI,MAAOF,CAAAA,UAAU,CAACkB,QAAX,CAAoB,gBAApB,CAAP,CAFR,CAIH,CACJ,CARD,CAUA,GAAMQ,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CACxBjC,UAAU,CAACK,IAAD,CAAV,CACH,CAFD,CAIA,GAAM6B,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnBjC,MAAM,CAAC,CAAEO,MAAM,CAANA,MAAF,CAAUD,UAAU,CAAVA,UAAV,CAAsBF,IAAI,CAAJA,IAAtB,CAAD,CAAN,CACH,CAFD,CAIA,MACI,OAAC,SAAD,YACI,KAAC,QAAD,EACI,KAAK,CAAEC,CAAC,CAAC,yBAAD,CADZ,CAEI,MAAM,CAAE,wBACJC,CAAAA,UAAU,CAAC4B,KAAX,CAAiB,CACbC,KAAK,CAAE,CADM,CAEbC,MAAM,CAAE,CAAC,CAAEC,IAAI,CAAE,MAAR,CAAD,CAFK,CAAjB,CADI,EAFZ,EADJ,CAUI,KAAC,OAAD,EACI,IAAI,CAAE3B,WADV,CAEI,SAAS,CAAEoB,gBAFf,EAVJ,CAcI,MAAC,UAAD,YACI,KAAC,QAAD,EACI,KAAK,CAAEzB,CAAC,CAAC,YAAD,CADZ,CAEI,QAAQ,CAAE,CAAEgC,IAAI,CAAE,gBAAR,CAFd,CAGI,OAAO,CAAE,kBAAM,CACX/B,UAAU,CAACkB,QAAX,CAAoB,SAApB,EACH,CALL,CAMI,aAAa,KANjB,CAOI,OAAO,KAPX,EADJ,CAUI,KAAC,QAAD,EACI,KAAK,CAAEnB,CAAC,CAAC,YAAD,CADZ,CAEI,QAAQ,CAAE,CAAEgC,IAAI,CAAE,cAAR,CAFd,CAGI,OAAO,CAAE,kBAAM,CACX/B,UAAU,CAACkB,QAAX,CAAoB,SAApB,EACH,CALL,CAMI,aAAa,KANjB,CAOI,OAAO,KAPX,EAVJ,CAmBI,KAAC,QAAD,EACI,KAAK,CAAEnB,CAAC,CAAC,YAAD,CADZ,CAEI,QAAQ,CAAE,CAAEgC,IAAI,CAAE,QAAR,CAFd,CAGI,OAAO,CAAE,kBAAM,CACXxC,UAAU,CAACyC,gBAAX,CACI,2DADJ,EAGH,CAPL,CAQI,aAAa,KARjB,CASI,OAAO,KATX,EAnBJ,CA8BI,KAAC,QAAD,EACI,KAAK,CAAEjC,CAAC,CAAC,aAAD,CADZ,CAEI,QAAQ,CAAE,CAAEgC,IAAI,CAAE,mBAAR,CAFd,CAGI,OAAO,CAAE,kBAAM,CACXxC,UAAU,CAACyC,gBAAX,CACI,0DADJ,EAGH,CAPL,CAQI,aAAa,KARjB,CASI,OAAO,KATX,EA9BJ,CAyCI,KAAC,QAAD,EACI,KAAK,CAAEjC,CAAC,CAAC,YAAD,CADZ,CAEI,QAAQ,CAAE,CAAEgC,IAAI,CAAE,cAAR,CAFd,CAGI,OAAO,CAAE,kBAAM,CACXxC,UAAU,CAACyC,gBAAX,CACI,6CADJ,EAGH,CAPL,CAQI,aAAa,KARjB,CASI,OAAO,KATX,EAzCJ,CAqDI,KAAC,QAAD,EACI,KAAK,CAAEjC,CAAC,CAAC,aAAD,CADZ,CAEI,QAAQ,CAAE,CAAEgC,IAAI,CAAE,cAAR,CAFd,CAGI,OAAO,CAAE,kBAAM,CACX/B,UAAU,CAACkB,QAAX,CAAoB,gBAApB,EACH,CALL,CAMI,aAAa,KANjB,CAOI,OAAO,KAPX,EArDJ,CA+DI,KAAC,QAAD,EACI,KAAK,CAAEnB,CAAC,CAAC,YAAD,CADZ,CAEI,QAAQ,CAAE,CAAEgC,IAAI,CAAE,UAAR,CAFd,CAGI,aAAa,KAHjB,CAII,YAAY,CACR,2BACI,KAAC,IAAD,iBADJ,CAEI,KAAC,MAAD,EACI,KAAK,CAAEjC,IAAI,CAACmC,QAAL,GAAkB,IAD7B,CAEI,aAAa,CAAEP,aAFnB,EAFJ,CAMI,KAAC,IAAD,qBANJ,GALR,EA/DJ,CAgFI,KAAC,QAAD,EACI,KAAK,CAAE3B,CAAC,CAAC,yBAAD,CADZ,CAEI,QAAQ,CAAE,CAAEgC,IAAI,CAAE,UAAR,CAFd,CAGI,OAAO,CAAE,kBAAM,CACXT,WAAW,CAAC,UAAD,CAAX,CACH,CALL,CAMI,aAAa,KANjB,CAOI,OAAO,KAPX,EAhFJ,CAyFI,KAAC,IAAD,EAAM,KAAK,CAAEY,UAAU,CAACC,SAAxB,UACI,KAAC,SAAD,EACI,OAAO,CAAER,QADb,CAEI,IAAI,CAAE5B,CAAC,CAAC,YAAD,CAFX,EADJ,EAzFJ,GAdJ,CAgHI,KAAC,SAAD,IAhHJ,GADJ,CAoHH,CAzK2B,CAA5B,CA2KA,GAAMmC,CAAAA,UAAU,CAAGE,UAAU,CAACC,MAAX,CAAkB,CACjCF,SAAS,CAAE,CACPA,SAAS,CAAE,EADJ,CADsB,CAAlB,CAAnB,CAMA,cAAetC,CAAAA,WAAf"},"metadata":{},"sourceType":"module"}