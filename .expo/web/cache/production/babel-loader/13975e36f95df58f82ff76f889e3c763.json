{"ast":null,"code":"import*as React from'react';import{NavigationContainer}from'@react-navigation/native';import{createBottomTabNavigator}from'@react-navigation/bottom-tabs';import Alert from\"react-native-web/dist/exports/Alert\";import Image from\"react-native-web/dist/exports/Image\";import VerifyNavigator from\"./verify\";import ModifyNavigator from\"./modify\";import RecordNavigator from\"./record\";import*as _ from'lodash';import{useTranslation}from'react-i18next';import HomeNavigator from\"./home\";import SettingNavigator from\"./setting\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Tab=createBottomTabNavigator();var getSource=function getSource(route,focused){switch(route){case'Home':return focused?require(\"../assets/images/tab_home_pre.png\"):require(\"../assets/images/tab_home.png\");case'Verify':return focused?require(\"../assets/images/tab_verfify_pre.png\"):require(\"../assets/images/tab_verfify.png\");case'Modify':return focused?require(\"../assets/images/Scan(Active).png\"):require(\"../assets/images/Scan(Inactive).png\");case'Record':return focused?require(\"../assets/images/tab_record_pre.png\"):require(\"../assets/images/tab_record.png\");default:return focused?require(\"../assets/images/tab_more_pre.png\"):require(\"../assets/images/tab_more.png\");}};var _listeners=function listeners(_ref){var navigation=_ref.navigation,route=_ref.route,t=_ref.t;return{tabPress:function tabPress(e){onTabChange({navigation:navigation,event:e,route:route,t:t});}};};var onTabChange=function onTabChange(_ref2){var navigation=_ref2.navigation,event=_ref2.event,route=_ref2.route,t=_ref2.t;event.preventDefault();var state=navigation.dangerouslyGetState();var currentTab=_.get(_.last(state.history),'key');var routeName=_.get(route,'state.routeNames[0]',route.name);if(_.startsWith(currentTab,'Verify')||_.startsWith(currentTab,'Modify')){var currentRoute=state.routes.find(function(route){return route.key===currentTab;});if(_.get(currentRoute,'state.index')){return Alert.alert(t('Common.Warning'),t('Tab.LossData'),[{text:t('Common.Cancel')},{text:t('Common.Confirm'),onPress:function onPress(){navigation.reset({index:0,routes:[{name:route.name}]});}}]);}}navigation.reset({index:0,routes:[{name:route.name}]});};var MainNavigator=function MainNavigator(){var _useTranslation=useTranslation(),t=_useTranslation.t;return _jsx(NavigationContainer,{children:_jsxs(Tab.Navigator,{screenOptions:function screenOptions(_ref3){var route=_ref3.route;return{tabBarIcon:function tabBarIcon(_ref4){var focused=_ref4.focused;return _jsx(Image,{style:{resizeMode:'cover',width:28,height:28},source:getSource(route.name,focused)});},tabBarOptions:{activeTintColor:'red'}};},children:[_jsx(Tab.Screen,{name:\"Home\",component:HomeNavigator,listeners:function listeners(_ref5){var navigation=_ref5.navigation,route=_ref5.route;return _listeners({navigation:navigation,route:route,t:t});},options:{title:t('Tab.Home')}}),_jsx(Tab.Screen,{name:\"Verify\",component:VerifyNavigator,listeners:function listeners(_ref6){var navigation=_ref6.navigation,route=_ref6.route;return _listeners({navigation:navigation,route:route,t:t});},options:{title:t('Tab.Verify')}}),_jsx(Tab.Screen,{name:\"Modify\",component:ModifyNavigator,listeners:function listeners(_ref7){var navigation=_ref7.navigation,route=_ref7.route;return _listeners({navigation:navigation,route:route,t:t});},options:{title:t('Tab.Modify')}}),_jsx(Tab.Screen,{name:\"Record\",component:RecordNavigator,listeners:function listeners(_ref8){var navigation=_ref8.navigation,route=_ref8.route;return _listeners({navigation:navigation,route:route,t:t});},options:{title:t('Tab.Record')}}),_jsx(Tab.Screen,{name:\"Settings\",component:SettingNavigator,listeners:function listeners(_ref9){var navigation=_ref9.navigation,route=_ref9.route;return _listeners({navigation:navigation,route:route,t:t});},options:{title:t('Tab.Setting')}})]})});};export default MainNavigator;","map":{"version":3,"names":["React","NavigationContainer","createBottomTabNavigator","VerifyNavigator","ModifyNavigator","RecordNavigator","_","useTranslation","HomeNavigator","SettingNavigator","Tab","getSource","route","focused","require","listeners","navigation","t","tabPress","e","onTabChange","event","preventDefault","state","dangerouslyGetState","currentTab","get","last","history","routeName","name","startsWith","currentRoute","routes","find","key","Alert","alert","text","onPress","reset","index","MainNavigator","tabBarIcon","resizeMode","width","height","tabBarOptions","activeTintColor","title"],"sources":["I:/Workspace/mediWS/mccWS/frontend-clinic-app/src/routers/main.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { NavigationContainer } from '@react-navigation/native';\r\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\r\nimport SettingPage from '../pages/setting';\r\nimport { Alert, Image } from 'react-native';\r\nimport VerifyNavigator from './verify';\r\nimport ModifyNavigator from './modify';\r\nimport RecordNavigator from './record';\r\nimport * as _ from 'lodash';\r\nimport { useTranslation } from 'react-i18next';\r\nimport HomeNavigator from './home';\r\nimport SettingNavigator from './setting';\r\n\r\ntype OnTabChange = {\r\n    navigation: any,\r\n    event: any,\r\n    route: any,\r\n    t: any\r\n}\r\n\r\nconst Tab = createBottomTabNavigator();\r\n\r\nconst getSource = (route: string, focused: boolean) => {\r\n    switch (route) {\r\n        case 'Home':\r\n            return focused ?\r\n                require('../assets/images/tab_home_pre.png') :\r\n                require('../assets/images/tab_home.png');\r\n        case 'Verify':\r\n            return focused ?\r\n                require('../assets/images/tab_verfify_pre.png') :\r\n                require('../assets/images/tab_verfify.png');\r\n        case 'Modify':\r\n            return focused ?\r\n                require('../assets/images/Scan(Active).png') :\r\n                require('../assets/images/Scan(Inactive).png');\r\n        case 'Record':\r\n            return focused ?\r\n                require('../assets/images/tab_record_pre.png') :\r\n                require('../assets/images/tab_record.png');\r\n        default:\r\n            return focused ?\r\n                require('../assets/images/tab_more_pre.png') :\r\n                require('../assets/images/tab_more.png');\r\n    }\r\n}\r\n\r\nconst listeners = ({ navigation, route, t }: any) => ({\r\n    tabPress: (e: any) => {\r\n        onTabChange({\r\n            navigation,\r\n            event: e,\r\n            route,\r\n            t\r\n        })\r\n    },\r\n})\r\n\r\nconst onTabChange = ({ navigation, event, route, t }: OnTabChange) => {\r\n    event.preventDefault();\r\n\r\n    // if user press the same tab, do nothing\r\n    const state = navigation.dangerouslyGetState();\r\n\r\n    // ensure user cannot press back button\r\n    const currentTab = _.get(_.last(state.history), 'key');\r\n\r\n    // ensure go to the first page of the route\r\n    const routeName = _.get(route, 'state.routeNames[0]', route.name);\r\n\r\n    // avoid user leave verify and modify easily\r\n    if (_.startsWith(currentTab, 'Verify') || _.startsWith(currentTab, 'Modify')) {\r\n        // if index is not 0, means that user has input data\r\n        const currentRoute = state.routes.find((route: any) => route.key === currentTab);\r\n        if (_.get(currentRoute, 'state.index')) {\r\n            return Alert.alert(\r\n                t('Common.Warning'),\r\n                t('Tab.LossData'),\r\n                [\r\n                    {\r\n                        text: t('Common.Cancel')\r\n                    },\r\n                    {\r\n                        text: t('Common.Confirm'),\r\n                        onPress: () => {\r\n                            navigation.reset({\r\n                                index: 0,\r\n                                routes: [{ name: route.name }]\r\n                            })\r\n                        }\r\n                    }\r\n                ]\r\n            )\r\n        }\r\n    }\r\n\r\n    // navigation.navigate(routeName);\r\n    navigation.reset({\r\n        index: 0,\r\n        routes: [{ name: route.name }]\r\n    })\r\n}\r\n\r\nconst MainNavigator = () => {\r\n    const { t } = useTranslation();\r\n    return (\r\n        <NavigationContainer>\r\n            <Tab.Navigator\r\n                screenOptions={({ route }) => ({\r\n                    tabBarIcon: ({ focused }) => (\r\n                        <Image\r\n                            style={{ resizeMode: 'cover', width: 28, height: 28 }}\r\n                            source={getSource(route.name, focused)}\r\n                        />\r\n                    ),\r\n                    tabBarOptions: {\r\n                        activeTintColor: 'red',\r\n                    }\r\n                })}\r\n            >\r\n                <Tab.Screen\r\n                    name='Home'\r\n                    component={HomeNavigator}\r\n                    listeners={({ navigation, route }) => listeners({ navigation, route, t })}\r\n                    options={{ title: t('Tab.Home') }}\r\n                />\r\n                <Tab.Screen\r\n                    name=\"Verify\"\r\n                    component={VerifyNavigator}\r\n                    listeners={({ navigation, route }) => listeners({ navigation, route, t })}\r\n                    options={{ title: t('Tab.Verify') }}\r\n                />\r\n                <Tab.Screen\r\n                    name=\"Modify\"\r\n                    component={ModifyNavigator}\r\n                    listeners={({ navigation, route }) => listeners({ navigation, route, t })}\r\n                    options={{ title: t('Tab.Modify') }}\r\n                />\r\n                <Tab.Screen\r\n                    name=\"Record\"\r\n                    component={RecordNavigator}\r\n                    listeners={({ navigation, route }) => listeners({ navigation, route, t })}\r\n                    options={{ title: t('Tab.Record') }}\r\n                />\r\n                <Tab.Screen\r\n                    name='Settings'\r\n                    component={SettingNavigator}\r\n                    listeners={({ navigation, route }) => listeners({ navigation, route, t })}\r\n                    options={{ title: t('Tab.Setting') }}\r\n                />\r\n            </Tab.Navigator>\r\n        </NavigationContainer>\r\n    );\r\n}\r\n\r\nexport default MainNavigator;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}