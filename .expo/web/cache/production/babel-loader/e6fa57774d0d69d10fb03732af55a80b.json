{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import{request,requestPhp}from\"../utils/request\";import AsyncStorage from'@react-native-async-storage/async-storage';import*as _ from'lodash';import{newReminder}from\"../models/reminder\";import{newNews}from\"../models/news\";import{newPromotion}from\"../models/promotion\";import{newCooperators}from\"../models/cooperators\";import{newnewProducts}from\"../models/newProducts\";import{newResources}from\"../models/resources\";import Constants from'expo-constants';import*as Updates from'expo-updates';import*as Notifications from'expo-notifications';import Platform from\"react-native-web/dist/exports/Platform\";var axios=require('axios');export var getBanners=function _callee(){var bannelUrls,banners;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(requestPhp({url:\"api/getBanner.php\",data:{}}));case 2:bannelUrls=_context.sent;banners=_.map(bannelUrls.data,function(banner){return{source:banner.img_path,url:banner.url};});return _context.abrupt(\"return\",banners);case 5:case\"end\":return _context.stop();}}},null,null,null,Promise);};export var getLocalLang=function _callee2(){var lang;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _regeneratorRuntime.awrap(AsyncStorage.getItem('lang'));case 3:lang=_context2.sent;return _context2.abrupt(\"return\",lang||'chi');case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);return _context2.abrupt(\"return\",'chi');case 10:case\"end\":return _context2.stop();}}},null,null,[[0,7]],Promise);};export var changeLang=function _callee3(i18n){var lang,newLang;return _regeneratorRuntime.async(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _regeneratorRuntime.awrap(getLocalLang());case 2:lang=_context3.sent;newLang=lang==='en'?'chi':'en';i18n.changeLanguage(newLang);_context3.next=7;return _regeneratorRuntime.awrap(AsyncStorage.setItem('lang',newLang));case 7:case\"end\":return _context3.stop();}}},null,null,null,Promise);};export var getBanks=function _callee4(){var resp;return _regeneratorRuntime.async(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _regeneratorRuntime.awrap(requestPhp({url:'api/getBanks.php'}));case 2:resp=_context4.sent;return _context4.abrupt(\"return\",_.map(resp.data,function(bank){return{code:bank.code,nameChi:bank.name_cn,nameEn:bank.name_en};}));case 4:case\"end\":return _context4.stop();}}},null,null,null,Promise);};export var getDistinct=function _callee5(){var resp;return _regeneratorRuntime.async(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _regeneratorRuntime.awrap(requestPhp({url:'api/getDistricts.php'}));case 2:resp=_context5.sent;return _context5.abrupt(\"return\",_.map(resp.data,function(district){return{code:district.district_id,nameChi:district.name_cn,nameEn:district.name_en};}));case 4:case\"end\":return _context5.stop();}}},null,null,null,Promise);};export var getSpecialities=function _callee6(){var resp;return _regeneratorRuntime.async(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _regeneratorRuntime.awrap(requestPhp({url:'api/getSpecialities.php'}));case 2:resp=_context6.sent;return _context6.abrupt(\"return\",_.map(resp.data,function(item){return{code:item.id,nameChi:item.name_cn,nameEn:item.name_en};}));case 4:case\"end\":return _context6.stop();}}},null,null,null,Promise);};export var getAuthorities=function _callee7(){var resp;return _regeneratorRuntime.async(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return _regeneratorRuntime.awrap(requestPhp({url:'api/getAuthorities.php'}));case 2:resp=_context7.sent;return _context7.abrupt(\"return\",_.map(resp.data,function(item){return{code:item.id,nameChi:item.name_cn,nameEn:item.name_en};}));case 4:case\"end\":return _context7.stop();}}},null,null,null,Promise);};export var getAllBenefits=function _callee8(){var resp;return _regeneratorRuntime.async(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return _regeneratorRuntime.awrap(requestPhp({url:'api/getAllBenefits.php'}));case 2:resp=_context8.sent;return _context8.abrupt(\"return\",_.map(resp.data,function(item){return{code:item.benefit_code,nameChi:item.name_cn,nameEn:item.name_en};}));case 4:case\"end\":return _context8.stop();}}},null,null,null,Promise);};export var getBenefits=function _callee9(_ref){var token,clinicId,resp;return _regeneratorRuntime.async(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:token=_ref.token,clinicId=_ref.clinicId;_context9.next=3;return _regeneratorRuntime.awrap(requestPhp({url:'api/getBenefits.php',data:{token:token,clinic_id:clinicId}}));case 3:resp=_context9.sent;return _context9.abrupt(\"return\",_.map(resp.data,function(item){return{code:item.benefit_code,nameChi:item.name_cn,nameEn:item.name_en};}));case 5:case\"end\":return _context9.stop();}}},null,null,null,Promise);};export var getBenefitsByClinicInsurer=function _callee10(_ref2){var token,clinicId,insurerId,resp;return _regeneratorRuntime.async(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:token=_ref2.token,clinicId=_ref2.clinicId,insurerId=_ref2.insurerId;_context10.next=3;return _regeneratorRuntime.awrap(requestPhp({url:'api/getBenefitsByClinicInsurer.php',data:{token:token,clinic_id:clinicId,insurer_id:insurerId}}));case 3:resp=_context10.sent;return _context10.abrupt(\"return\",_.map(resp.data,function(item){return{code:item.benefit_code,nameChi:item.name_cn,nameEn:item.name_en};}));case 5:case\"end\":return _context10.stop();}}},null,null,null,Promise);};export var getInsurers=function _callee11(){var resp;return _regeneratorRuntime.async(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return _regeneratorRuntime.awrap(requestPhp({url:'api/getInsurers.php'}));case 2:resp=_context11.sent;return _context11.abrupt(\"return\",_.map(resp.data,function(item){return{code:item.insurer_id,name:item.name,nameChi:item.description_cn,nameEn:item.description_en};}));case 4:case\"end\":return _context11.stop();}}},null,null,null,Promise);};export var getReminders=function _callee12(_ref3){var clinicId,i18n,token,resp;return _regeneratorRuntime.async(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:clinicId=_ref3.clinicId,i18n=_ref3.i18n,token=_ref3.token;_context12.next=3;return _regeneratorRuntime.awrap(request({url:'getReminders',data:{clinic_id:clinicId},token:token,i18n:i18n}));case 3:resp=_context12.sent;return _context12.abrupt(\"return\",_.map(resp.reminders,function(reminder){return newReminder({id:reminder.id,newsId:reminder.news_id,titleEn:reminder.title_en,titleChi:reminder.title_cn,descriptionChi:reminder.description_cn,descriptionEn:reminder.description_en});}));case 5:case\"end\":return _context12.stop();}}},null,null,null,Promise);};export var getNewsList=function _callee13(_ref4){var i18n,token,resp;return _regeneratorRuntime.async(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:i18n=_ref4.i18n,token=_ref4.token;_context13.next=3;return _regeneratorRuntime.awrap(request({url:'getNewsList',token:token,i18n:i18n}));case 3:resp=_context13.sent;return _context13.abrupt(\"return\",_.map(resp.news,function(news){return newNews({id:news.id,titleEn:news.title_en,titleChi:news.title_cn,descriptionEn:news.description_en,descriptionChi:news.description_cn,createdAt:news.createdAt,important:news.important===1});}));case 5:case\"end\":return _context13.stop();}}},null,null,null,Promise);};export var getNewsDetail=function _callee14(_ref5){var i18n,token,newsId,resp;return _regeneratorRuntime.async(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:i18n=_ref5.i18n,token=_ref5.token,newsId=_ref5.newsId;_context14.next=3;return _regeneratorRuntime.awrap(request({url:'getNews',data:{news_id:newsId},token:token,i18n:i18n}));case 3:resp=_context14.sent;return _context14.abrupt(\"return\",newNews({id:resp.id,titleEn:resp.title_en,titleChi:resp.title_cn,descriptionEn:resp.description_en,descriptionChi:resp.description_cn,createdAt:resp.createdAt}));case 5:case\"end\":return _context14.stop();}}},null,null,null,Promise);};export var getPromotionList=function _callee15(_ref6){var token,clinicId,resp;return _regeneratorRuntime.async(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:token=_ref6.token,clinicId=_ref6.clinicId;_context15.next=3;return _regeneratorRuntime.awrap(requestPhp({url:'api/getPromotion.php',data:{token:token,clinic_id:clinicId}}));case 3:resp=_context15.sent;return _context15.abrupt(\"return\",_.map(resp.data,function(promotion){return newPromotion({id:promotion.id,titleEn:promotion.title_en,titleChi:promotion.title_chi,contentEn:promotion.content,contentChi:promotion.content_chi,thumbImg:promotion.thumb_img,contentImg:promotion.content_img,lastUpdate:promotion.last_update,modifyTime:promotion.modified_time,status:promotion.status});}));case 5:case\"end\":return _context15.stop();}}},null,null,null,Promise);};export var getAboutUs=function _callee16(){var resp;return _regeneratorRuntime.async(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.next=2;return _regeneratorRuntime.awrap(requestPhp({url:'api/aboutUs.php'}));case 2:resp=_context16.sent;return _context16.abrupt(\"return\",{nameEn:resp.data.content,nameChi:resp.data.content_chi});case 4:case\"end\":return _context16.stop();}}},null,null,null,Promise);};export var getVersion=function _callee17(_ref7){var i18n,platform,newVersion,oldVersion,resp;return _regeneratorRuntime.async(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:i18n=_ref7.i18n,platform=_ref7.platform;newVersion=Constants.manifest.version;_context17.next=4;return _regeneratorRuntime.awrap(AsyncStorage.getItem('version').catch(function(error){return null;}));case 4:oldVersion=_context17.sent;_context17.next=7;return _regeneratorRuntime.awrap(request({url:'versions',data:{platform:platform,oldVersion:oldVersion||newVersion,newVersion:newVersion},i18n:i18n,isPublic:true}));case 7:resp=_context17.sent;return _context17.abrupt(\"return\",resp.data);case 9:case\"end\":return _context17.stop();}}},null,null,null,Promise);};export var checkVersion=function _callee18(_ref8){var i18n,platform,oldVersion,_await$getVersion,updated,version,_split$map,_split$map2,currentMajor,currentMinor,currentPatch,newerVersions,mandatoryVersion,resp,newestVersion;return _regeneratorRuntime.async(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:i18n=_ref8.i18n,platform=_ref8.platform;_context18.next=3;return _regeneratorRuntime.awrap(AsyncStorage.getItem('version'));case 3:oldVersion=_context18.sent;_context18.next=6;return _regeneratorRuntime.awrap(getVersion({i18n:i18n,platform:platform}));case 6:_await$getVersion=_context18.sent;updated=_await$getVersion.updated;version=Constants.manifest.version;_split$map=version.split('.').map(Number),_split$map2=_slicedToArray(_split$map,3),currentMajor=_split$map2[0],currentMinor=_split$map2[1],currentPatch=_split$map2[2];_.forEach(updated,function(ver){ver.descriptionChi=\"v\"+ver.version+\": \"+ver.descriptionChi;ver.descriptionEn=\"v\"+ver.version+\": \"+ver.descriptionEn;});newerVersions=_.filter(updated,function(_ref9){var version=_ref9.version;var _version$split$map=version.split('.').map(Number),_version$split$map2=_slicedToArray(_version$split$map,3),major=_version$split$map2[0],minor=_version$split$map2[1],patch=_version$split$map2[2];if(major<currentMajor){return false;}if(minor<currentMinor){return major>currentMajor;}if(patch<currentPatch){return minor>currentMinor;}return patch>currentPatch;});mandatoryVersion=_.find(newerVersions,function(ver){return ver.mandatory;});_context18.next=15;return _regeneratorRuntime.awrap(Updates.checkForUpdateAsync());case 15:resp=_context18.sent;newestVersion=_.get(resp,'manifest.version');_context18.next=19;return _regeneratorRuntime.awrap(AsyncStorage.setItem('version',version||''));case 19:return _context18.abrupt(\"return\",{version:version,installVersion:_.get(mandatoryVersion,'version'),updateVersion:newerVersions.length>0?newestVersion:'',updated:oldVersion&&oldVersion===version?[]:newerVersions});case 20:case\"end\":return _context18.stop();}}},null,null,null,Promise);};export var registerNofiticationToken=function _callee19(){var _await$Notifications$,existingStatus,finalStatus,_await$Notifications$2,status,token;return _regeneratorRuntime.async(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:_context19.next=2;return _regeneratorRuntime.awrap(Notifications.getPermissionsAsync());case 2:_await$Notifications$=_context19.sent;existingStatus=_await$Notifications$.status;finalStatus=existingStatus;if(!(existingStatus!=='granted')){_context19.next=11;break;}_context19.next=8;return _regeneratorRuntime.awrap(Notifications.requestPermissionsAsync());case 8:_await$Notifications$2=_context19.sent;status=_await$Notifications$2.status;finalStatus=status;case 11:if(!(finalStatus!=='granted')){_context19.next=13;break;}return _context19.abrupt(\"return\",'');case 13:_context19.next=15;return _regeneratorRuntime.awrap(Notifications.getExpoPushTokenAsync());case 15:token=_context19.sent.data;if(Platform.OS==='android'){Notifications.setNotificationChannelAsync('default',{name:'default',description:'Mediconcen - 醫結',importance:Notifications.AndroidImportance.MAX,vibrationPattern:[0,250,250,250],lightColor:'#FF231F7C'});}return _context19.abrupt(\"return\",token);case 18:case\"end\":return _context19.stop();}}},null,null,null,Promise);};export var updateNotificationToken=function _callee20(_ref10){var clinicId,notificationToken,token,i18n;return _regeneratorRuntime.async(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:clinicId=_ref10.clinicId,notificationToken=_ref10.notificationToken,token=_ref10.token,i18n=_ref10.i18n;_context20.prev=1;console.log({clinic_id:Number(clinicId),platform:Platform.OS,token:notificationToken});_context20.next=5;return _regeneratorRuntime.awrap(request({url:'notifications/token',data:{clinicId:Number(clinicId),platform:Platform.OS,token:notificationToken},token:token,i18n:i18n}));case 5:_context20.next=10;break;case 7:_context20.prev=7;_context20.t0=_context20[\"catch\"](1);console.log(_context20.t0);case 10:case\"end\":return _context20.stop();}}},null,null,[[1,7]],Promise);};export var getCooperators=function _callee21(_ref11){var clinicId,i18n,token,resp,insurers;return _regeneratorRuntime.async(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:clinicId=_ref11.clinicId,i18n=_ref11.i18n,token=_ref11.token;_context21.next=3;return _regeneratorRuntime.awrap(request({url:'/insurers/supported',token:\"Bearer \"+token,i18n:i18n,isPublic:false,method:'get',queryString:'?clinicId='+clinicId}));case 3:resp=_context21.sent;insurers=resp.insurers;return _context21.abrupt(\"return\",_.map(insurers,function(insurer){return newCooperators({descriptionChi:insurer.description_cn,descriptionEn:insurer.description_en,insurerId:insurer.insurer_id,logo:insurer.logo,physicalCardImage:insurer.physical_card_image,physicalCard:insurer.physical_card,supportMedicalCard:insurer.support_medical_card,supportQrcode:insurer.support_qrcode,userGuide:insurer.user_guide});}));case 6:case\"end\":return _context21.stop();}}},null,null,null,Promise);};export var getNewProducts=function _callee22(_ref12){var clinicId,i18n,token,resp,insurers;return _regeneratorRuntime.async(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:clinicId=_ref12.clinicId,i18n=_ref12.i18n,token=_ref12.token;_context22.next=3;return _regeneratorRuntime.awrap(request({url:'/insurers/new-products',token:\"Bearer \"+token,i18n:i18n,isPublic:false,method:'get',queryString:'?clinicId='+clinicId}));case 3:resp=_context22.sent;insurers=resp.items;return _context22.abrupt(\"return\",_.map(insurers,function(insurer){return newnewProducts({id:insurer.id,insurerId:insurer.insurer_id,nameEn:insurer.name_en,nameChi:insurer.name_cn,launchDate:insurer.launch_date});}));case 6:case\"end\":return _context22.stop();}}},null,null,null,Promise);};export var getResources=function _callee23(_ref13){var clinicId,i18n,token,resp,resources;return _regeneratorRuntime.async(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:clinicId=_ref13.clinicId,i18n=_ref13.i18n,token=_ref13.token;_context23.next=3;return _regeneratorRuntime.awrap(request({url:'/resource',token:\"Bearer \"+token,i18n:i18n,isPublic:false,method:'get',queryString:''}));case 3:resp=_context23.sent;resources=resp.resources;return _context23.abrupt(\"return\",_.map(resources,function(resource){return newResources({documentId:resource.document_id,titleEn:resource.title_en,titleChi:resource.title_cn,contentEn:resource.content_en,contentChi:resource.content_cn,format:resource.format,linkEn:resource.link_en,linkChi:resource.link_cn,iconLink:resource.icon_link});}));case 6:case\"end\":return _context23.stop();}}},null,null,null,Promise);};export var getFavoriteDiagnosis=function _callee24(_ref14){var clinicId,i18n,token,resp;return _regeneratorRuntime.async(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:clinicId=_ref14.clinicId,i18n=_ref14.i18n,token=_ref14.token;_context24.prev=1;_context24.next=4;return _regeneratorRuntime.awrap(request({url:'/favoriteDiagnosis/getFavoriteDiagnosis',token:\"Bearer \"+token,i18n:i18n,isPublic:false,method:'get',queryString:'?clinicId='+clinicId}));case 4:resp=_context24.sent;return _context24.abrupt(\"return\",resp);case 8:_context24.prev=8;_context24.t0=_context24[\"catch\"](1);throw _context24.t0;case 11:case\"end\":return _context24.stop();}}},null,null,[[1,8]],Promise);};export var toggleFavoriteDiagnosis=function _callee25(_ref15){var clinicId,i18n,token,diagnosisId,type,resp;return _regeneratorRuntime.async(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:clinicId=_ref15.clinicId,i18n=_ref15.i18n,token=_ref15.token,diagnosisId=_ref15.diagnosisId,type=_ref15.type;_context25.prev=1;_context25.next=4;return _regeneratorRuntime.awrap(request({url:'/favoriteDiagnosis/toggleFavoriteDiagnosis',data:{clinic_id:clinicId,diagnosis_id:diagnosisId,type:type},token:token,i18n:i18n}));case 4:resp=_context25.sent;return _context25.abrupt(\"return\",resp);case 8:_context25.prev=8;_context25.t0=_context25[\"catch\"](1);throw _context25.t0;case 11:case\"end\":return _context25.stop();}}},null,null,[[1,8]],Promise);};","map":{"version":3,"names":["request","requestPhp","AsyncStorage","_","newReminder","newNews","newPromotion","newCooperators","newnewProducts","newResources","Constants","Updates","Notifications","axios","require","getBanners","url","data","bannelUrls","banners","map","banner","source","img_path","getLocalLang","getItem","lang","changeLang","i18n","newLang","changeLanguage","setItem","getBanks","resp","bank","code","nameChi","name_cn","nameEn","name_en","getDistinct","district","district_id","getSpecialities","item","id","getAuthorities","getAllBenefits","benefit_code","getBenefits","token","clinicId","clinic_id","getBenefitsByClinicInsurer","insurerId","insurer_id","getInsurers","name","description_cn","description_en","getReminders","reminders","reminder","newsId","news_id","titleEn","title_en","titleChi","title_cn","descriptionChi","descriptionEn","getNewsList","news","createdAt","important","getNewsDetail","getPromotionList","promotion","title_chi","contentEn","content","contentChi","content_chi","thumbImg","thumb_img","contentImg","content_img","lastUpdate","last_update","modifyTime","modified_time","status","getAboutUs","getVersion","platform","newVersion","manifest","version","catch","error","oldVersion","isPublic","checkVersion","updated","split","Number","currentMajor","currentMinor","currentPatch","forEach","ver","newerVersions","filter","major","minor","patch","mandatoryVersion","find","mandatory","checkForUpdateAsync","newestVersion","get","installVersion","updateVersion","length","registerNofiticationToken","getPermissionsAsync","existingStatus","finalStatus","requestPermissionsAsync","getExpoPushTokenAsync","Platform","OS","setNotificationChannelAsync","description","importance","AndroidImportance","MAX","vibrationPattern","lightColor","updateNotificationToken","notificationToken","console","log","getCooperators","method","queryString","insurers","insurer","logo","physicalCardImage","physical_card_image","physicalCard","physical_card","supportMedicalCard","support_medical_card","supportQrcode","support_qrcode","userGuide","user_guide","getNewProducts","items","launchDate","launch_date","getResources","resources","resource","documentId","document_id","content_en","content_cn","format","linkEn","link_en","linkChi","link_cn","iconLink","icon_link","getFavoriteDiagnosis","toggleFavoriteDiagnosis","diagnosisId","type","diagnosis_id"],"sources":["I:/Workspace/mediWS/mccWS/frontend-clinic-app/src/services/app.ts"],"sourcesContent":["import { Banner } from \"../models/banner\";\r\nimport { request, requestPhp } from \"../utils/request\";\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport * as _ from 'lodash';\r\nimport { i18n } from \"i18next\";\r\nimport { Bank } from \"../models/bank\";\r\nimport { District } from '../models/district';\r\nimport { Specialities } from \"../models/specialities\";\r\nimport { Authority } from \"../models/authorities\";\r\nimport { Insurer } from \"../models/insurer\";\r\nimport { Benefit } from '../models/benefit';\r\nimport { newReminder } from \"../models/reminder\";\r\nimport { newNews } from \"../models/news\";\r\nimport { newPromotion } from \"../models/promotion\";\r\nimport { Name } from \"../models/common\";\r\nimport { Cooperators, newCooperators } from \"../models/cooperators\";\r\nimport { NewProducts, newnewProducts } from \"../models/newProducts\";\r\nimport { Resources, newResources } from \"../models/resources\";\r\nimport Constants from 'expo-constants';\r\nimport * as Updates from 'expo-updates';\r\nimport * as Notifications from 'expo-notifications';\r\nimport { Platform } from \"react-native\";\r\nconst axios = require('axios');\r\n\r\ntype GetBenefits = {\r\n    clinicId: string,\r\n    token: string\r\n}\r\n\r\ntype GetBenefitsByClinicInsurer = {\r\n    clinicId: string,\r\n    token: string,\r\n    insurerId: string \r\n}\r\n\r\ntype GetReminders = {\r\n    clinicId: string,\r\n    token: string,\r\n    i18n: i18n\r\n}\r\n\r\ntype GetNewsList = {\r\n    token: string,\r\n    i18n: i18n\r\n}\r\n\r\ntype GetNewsDetail = {\r\n    token: string,\r\n    i18n: i18n\r\n    newsId: string\r\n}\r\n\r\ntype GetPromotionList = {\r\n    token: string,\r\n    clinicId: string\r\n}\r\n\r\ntype GetVersion = {\r\n    platform: string,\r\n    i18n: i18n\r\n}\r\n\r\ntype UpdateNotificationToken = {\r\n    i18n: i18n,\r\n    token: string,\r\n    clinicId: string,\r\n    notificationToken: string\r\n}\r\n\r\ntype GetCooperators = {\r\n    clinicId: string,\r\n    token: string,\r\n    i18n: i18n\r\n}\r\n\r\ntype GetNewProducts = {\r\n    clinicId: string,\r\n    token: string,\r\n    i18n: i18n\r\n}\r\n\r\ntype GetResources = {\r\n    clinicId: string,\r\n    token: string,\r\n    i18n: i18n\r\n}\r\n\r\ntype GetFavoriteDiagnosis = {\r\n    clinicId: string,\r\n    token: string,\r\n    i18n: i18n\r\n}\r\n\r\ntype toggleFavoriteDiagnosis = {\r\n    clinicId: string,\r\n    token: string,\r\n    i18n: i18n,\r\n    diagnosisId: string,\r\n    type: string\r\n}\r\n\r\nexport const getBanners = async () => {\r\n    const bannelUrls = await requestPhp({\r\n        url: `api/getBanner.php`,\r\n        data: {}\r\n    });\r\n\r\n    const banners: Banner[] = _.map(bannelUrls.data, (banner: any) => ({\r\n        source: banner.img_path,\r\n        url: banner.url\r\n    }));\r\n    return banners;\r\n}\r\n\r\nexport const getLocalLang = async () => {\r\n    try {\r\n        const lang = await AsyncStorage.getItem('lang');\r\n        return lang || 'chi';\r\n    } catch (error) {\r\n        return 'chi';\r\n    }\r\n}\r\n\r\nexport const changeLang = async (i18n: i18n) => {\r\n    const lang = await getLocalLang();\r\n    const newLang = lang === 'en' ? 'chi' : 'en';\r\n    i18n.changeLanguage(newLang);\r\n    await AsyncStorage.setItem('lang', newLang);\r\n}\r\n\r\nexport const getBanks = async (): Promise<Bank[]> => {\r\n    const resp = await requestPhp({\r\n        url: 'api/getBanks.php'\r\n    });\r\n\r\n    return _.map(resp.data, (bank) => (\r\n        {\r\n            code: bank.code,\r\n            nameChi: bank.name_cn,\r\n            nameEn: bank.name_en\r\n        }\r\n    ));\r\n}\r\n\r\nexport const getDistinct = async (): Promise<District[]> => {\r\n    const resp = await requestPhp({\r\n        url: 'api/getDistricts.php'\r\n    });\r\n\r\n    return _.map(resp.data, (district) => (\r\n        {\r\n            code: district.district_id,\r\n            nameChi: district.name_cn,\r\n            nameEn: district.name_en\r\n        }\r\n    ));\r\n}\r\n\r\nexport const getSpecialities = async (): Promise<Specialities[]> => {\r\n    const resp = await requestPhp({\r\n        url: 'api/getSpecialities.php'\r\n    });\r\n\r\n    return _.map(resp.data, (item) => (\r\n        {\r\n            code: item.id,\r\n            nameChi: item.name_cn,\r\n            nameEn: item.name_en\r\n        }\r\n    ));\r\n}\r\n\r\nexport const getAuthorities = async (): Promise<Authority[]> => {\r\n    const resp = await requestPhp({\r\n        url: 'api/getAuthorities.php'\r\n    });\r\n\r\n    return _.map(resp.data, (item) => (\r\n        {\r\n            code: item.id,\r\n            nameChi: item.name_cn,\r\n            nameEn: item.name_en\r\n        }\r\n    ));\r\n}\r\n\r\nexport const getAllBenefits = async (): Promise<Benefit[]> => {\r\n    const resp = await requestPhp({\r\n        url: 'api/getAllBenefits.php'\r\n    });\r\n\r\n    return _.map(resp.data, (item) => (\r\n        {\r\n            code: item.benefit_code,\r\n            nameChi: item.name_cn,\r\n            nameEn: item.name_en\r\n        }\r\n    ));\r\n}\r\n\r\nexport const getBenefits = async ({ token, clinicId }: GetBenefits): Promise<Benefit[]> => {\r\n    const resp = await requestPhp({\r\n        url: 'api/getBenefits.php',\r\n        data: {\r\n            token,\r\n            clinic_id: clinicId\r\n        }\r\n    });\r\n\r\n    return _.map(resp.data, (item) => (\r\n        {\r\n            code: item.benefit_code,\r\n            nameChi: item.name_cn,\r\n            nameEn: item.name_en\r\n        }\r\n    ));\r\n}\r\n\r\nexport const getBenefitsByClinicInsurer = async ({ token, clinicId, insurerId }: GetBenefitsByClinicInsurer): Promise<Benefit[]> => {\r\n    const resp = await requestPhp({\r\n        url: 'api/getBenefitsByClinicInsurer.php',\r\n        data: {\r\n            token,\r\n            clinic_id: clinicId,\r\n            insurer_id: insurerId\r\n        }\r\n    });\r\n\r\n    return _.map(resp.data, (item) => (\r\n        {\r\n            code: item.benefit_code,\r\n            nameChi: item.name_cn,\r\n            nameEn: item.name_en\r\n        }\r\n    ));\r\n}\r\n\r\n\r\nexport const getInsurers = async (): Promise<Insurer[]> => {\r\n    const resp = await requestPhp({\r\n        url: 'api/getInsurers.php'\r\n    });\r\n\r\n    return _.map(resp.data, (item) => (\r\n        {\r\n            code: item.insurer_id,\r\n            name: item.name,\r\n            nameChi: item.description_cn,\r\n            nameEn: item.description_en\r\n        }\r\n    ));\r\n}\r\n\r\nexport const getReminders = async ({ clinicId, i18n, token }: GetReminders) => {\r\n\r\n    const resp = await request({\r\n        url: 'getReminders',\r\n        data: {\r\n            clinic_id: clinicId\r\n        },\r\n        token,\r\n        i18n\r\n    });\r\n\r\n    return _.map(resp.reminders, (reminder) => newReminder({\r\n        id: reminder.id,\r\n        newsId: reminder.news_id,\r\n        titleEn: reminder.title_en,\r\n        titleChi: reminder.title_cn,\r\n        descriptionChi: reminder.description_cn,\r\n        descriptionEn: reminder.description_en\r\n    }));\r\n}\r\n\r\nexport const getNewsList = async ({ i18n, token }: GetNewsList) => {\r\n    const resp = await request({\r\n        url: 'getNewsList',\r\n        token,\r\n        i18n\r\n    });\r\n\r\n    return _.map(resp.news, news => newNews({\r\n        id: news.id,\r\n        titleEn: news.title_en,\r\n        titleChi: news.title_cn,\r\n        descriptionEn: news.description_en,\r\n        descriptionChi: news.description_cn,\r\n        createdAt: news.createdAt,\r\n        important: news.important === 1\r\n    }));\r\n}\r\n\r\nexport const getNewsDetail = async ({ i18n, token, newsId }: GetNewsDetail) => {\r\n    const resp = await request({\r\n        url: 'getNews',\r\n        data: {\r\n            news_id: newsId\r\n        },\r\n        token,\r\n        i18n\r\n    });\r\n    \r\n    return newNews({\r\n        id: resp.id,\r\n        titleEn: resp.title_en,\r\n        titleChi: resp.title_cn,\r\n        descriptionEn: resp.description_en,\r\n        descriptionChi: resp.description_cn,\r\n        createdAt: resp.createdAt\r\n    });\r\n}\r\n\r\nexport const getPromotionList = async ({ token, clinicId }: GetPromotionList) => {\r\n    const resp = await requestPhp({\r\n        url: 'api/getPromotion.php',\r\n        data: {\r\n            token,\r\n            clinic_id: clinicId\r\n        }\r\n    });\r\n\r\n    return _.map(resp.data, (promotion) => newPromotion({\r\n        id: promotion.id,\r\n        titleEn: promotion.title_en,\r\n        titleChi: promotion.title_chi,\r\n        contentEn: promotion.content,\r\n        contentChi: promotion.content_chi,\r\n        thumbImg: promotion.thumb_img,\r\n        contentImg: promotion.content_img,\r\n        lastUpdate: promotion.last_update,\r\n        modifyTime: promotion.modified_time,\r\n        status: promotion.status\r\n    }));\r\n}\r\n\r\nexport const getAboutUs = async (): Promise<Name> => {\r\n    const resp = await requestPhp({\r\n        url: 'api/aboutUs.php'\r\n    });\r\n\r\n    return {\r\n        nameEn: resp.data.content,\r\n        nameChi: resp.data.content_chi\r\n    };\r\n}\r\n\r\nexport const getVersion = async ({ i18n, platform }: GetVersion) => {\r\n    const newVersion = Constants.manifest.version;\r\n    const oldVersion = await AsyncStorage.getItem('version').catch(error => null);\r\n        \r\n    const resp = await request({\r\n        url: 'versions',\r\n        data: {\r\n            platform,\r\n            oldVersion: oldVersion || newVersion,\r\n            newVersion\r\n        },\r\n        i18n,\r\n        isPublic: true\r\n    });\r\n\r\n    return resp.data;\r\n}\r\n\r\nexport const checkVersion = async ({ i18n, platform }: GetVersion) => {\r\n    const oldVersion = await AsyncStorage.getItem('version');\r\n    const { updated } = await getVersion({ i18n, platform });\r\n    const { version } = Constants.manifest;\r\n    const [currentMajor, currentMinor, currentPatch] = (version as string).split('.').map(Number);\r\n\r\n    _.forEach(updated, ver => {\r\n        ver.descriptionChi = `v${ver.version}: ${ver.descriptionChi}`;\r\n        ver.descriptionEn = `v${ver.version}: ${ver.descriptionEn}`;\r\n    });\r\n\r\n    const newerVersions = _.filter(updated, ({ version }) => {\r\n        const [major, minor, patch] = version.split('.').map(Number);\r\n\r\n        if (major < currentMajor) {\r\n            return false;\r\n        }\r\n        if (minor < currentMinor) {\r\n            return major > currentMajor;\r\n        }\r\n        if (patch < currentPatch) {\r\n            return minor > currentMinor;\r\n        }\r\n\r\n        return patch > currentPatch;\r\n    });\r\n    const mandatoryVersion = _.find(newerVersions, ver => ver.mandatory);\r\n    const resp = await Updates.checkForUpdateAsync();\r\n    const newestVersion = _.get(resp, 'manifest.version');\r\n\r\n    await AsyncStorage.setItem('version', version || '');\r\n    \r\n    return {\r\n        version,\r\n        installVersion: _.get(mandatoryVersion, 'version'),\r\n        updateVersion: newerVersions.length > 0 ? newestVersion : '',\r\n        updated: oldVersion && oldVersion === version ? [] : newerVersions\r\n    };\r\n}\r\n\r\nexport const registerNofiticationToken = async (): Promise<string> => {\r\n    const { status: existingStatus } = await Notifications.getPermissionsAsync();\r\n    let finalStatus = existingStatus;\r\n    if (existingStatus !== 'granted') {\r\n        const { status } = await Notifications.requestPermissionsAsync();\r\n        finalStatus = status;\r\n    }\r\n    if (finalStatus !== 'granted') {\r\n        return '';\r\n    }\r\n    const token = (await Notifications.getExpoPushTokenAsync()).data;\r\n\r\n    if (Platform.OS === 'android') {\r\n        Notifications.setNotificationChannelAsync('default', {\r\n            name: 'default',\r\n            description: 'Mediconcen - 醫結',\r\n            importance: Notifications.AndroidImportance.MAX,\r\n            vibrationPattern: [0, 250, 250, 250],\r\n            lightColor: '#FF231F7C',\r\n        });\r\n    }\r\n\r\n    return token;\r\n}\r\n\r\nexport const updateNotificationToken = async ({ clinicId, notificationToken, token, i18n }: UpdateNotificationToken) => {\r\n    try {\r\n        // update notification token\r\n        console.log({\r\n            clinic_id: Number(clinicId),\r\n            platform: Platform.OS,\r\n            token: notificationToken\r\n        })\r\n        await request({\r\n            url: 'notifications/token',\r\n            data: {\r\n                clinicId: Number(clinicId),\r\n                platform: Platform.OS,\r\n                token: notificationToken\r\n            },\r\n            token,\r\n            i18n\r\n        })\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nexport const getCooperators = async ({ clinicId, i18n, token }: GetCooperators): Promise<Cooperators[]> => {\r\n    const resp = await request({\r\n        url: '/insurers/supported',\r\n        token: \"Bearer \" + token,\r\n        i18n,\r\n        isPublic: false,\r\n        method: 'get',\r\n        queryString: '?clinicId='+clinicId\r\n    });\r\n\r\n    const insurers = resp.insurers;\r\n        return _.map(insurers, (insurer) => newCooperators({\r\n            descriptionChi: insurer.description_cn,\r\n            descriptionEn: insurer.description_en,\r\n            insurerId: insurer.insurer_id,\r\n            logo: insurer.logo,\r\n            physicalCardImage: insurer.physical_card_image,\r\n            physicalCard: insurer.physical_card,\r\n            supportMedicalCard: insurer.support_medical_card,\r\n            supportQrcode: insurer.support_qrcode,\r\n            userGuide: insurer.user_guide,\r\n    }));\r\n}\r\n\r\nexport const getNewProducts = async ({ clinicId, i18n, token }: GetNewProducts): Promise<NewProducts[]> => {\r\n    const resp = await request({\r\n        url: '/insurers/new-products',\r\n        token: \"Bearer \" + token,\r\n        i18n,\r\n        isPublic: false,\r\n        method: 'get',\r\n        queryString: '?clinicId='+clinicId\r\n    });\r\n\r\n\r\n    const insurers = resp.items;\r\n        return _.map(insurers, (insurer) => newnewProducts({\r\n            id: insurer.id,\r\n            insurerId: insurer.insurer_id,\r\n            nameEn: insurer.name_en,\r\n            nameChi: insurer.name_cn,\r\n            launchDate: insurer.launch_date,\r\n    }));\r\n}\r\n\r\nexport const getResources = async ({ clinicId, i18n, token }: GetResources): Promise<Resources[]> => {\r\n    const resp = await request({\r\n        url: '/resource',\r\n        token: \"Bearer \" + token,\r\n        i18n,\r\n        isPublic: false,\r\n        method: 'get',\r\n        queryString: ''\r\n    });\r\n    const resources = resp.resources;\r\n    return _.map(resources, (resource) => newResources({\r\n        documentId: resource.document_id,\r\n        titleEn: resource.title_en,\r\n        titleChi: resource.title_cn,\r\n        contentEn: resource.content_en,\r\n        contentChi: resource.content_cn,\r\n        format: resource.format,\r\n        linkEn: resource.link_en,\r\n        linkChi: resource.link_cn,\r\n        iconLink: resource.icon_link\r\n    }));\r\n}\r\n\r\nexport const getFavoriteDiagnosis = async ({ clinicId, i18n, token }: GetFavoriteDiagnosis): Promise<any> => {\r\n    try{\r\n        const resp = await request({\r\n            url: '/favoriteDiagnosis/getFavoriteDiagnosis',\r\n            token: \"Bearer \" + token,\r\n            i18n,\r\n            isPublic: false,\r\n            method: 'get',\r\n            queryString: '?clinicId='+clinicId\r\n        });\r\n        return resp;\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport const toggleFavoriteDiagnosis = async ({ clinicId, i18n, token, diagnosisId, type }: toggleFavoriteDiagnosis): Promise<any> => {\r\n    try{\r\n        const resp = await request({\r\n            url: '/favoriteDiagnosis/toggleFavoriteDiagnosis',\r\n            data: {\r\n                clinic_id: clinicId,\r\n                diagnosis_id: diagnosisId,\r\n                type: type,\r\n            },\r\n            token: token,\r\n            i18n,\r\n        });\r\n        return resp;\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}