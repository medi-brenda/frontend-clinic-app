{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import{Input,Item,View}from'native-base';import React,{useEffect,useState}from'react';import{useTranslation}from'react-i18next';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import Spinner from'react-native-loading-spinner-overlay';import Modal from'react-native-modal';import{checkOperationPassword}from\"../../actions/auth\";import{useStores}from\"../../stores\";import MCCButton from\"../mccButton\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OPModal=function OPModal(_ref){var show=_ref.show,onDismiss=_ref.onDismiss;var _useTranslation=useTranslation(),t=_useTranslation.t;var stores=useStores();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),spinner=_useState4[0],setSpinner=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){setPassword('');setError('');},[show]);var onPasswordChange=function onPasswordChange(password){setPassword(password);};var onSubmit=function onSubmit(password){setPassword(password);};var onCancel=function onCancel(){onDismiss('');};var onConfirm=function _callee(){var _await$checkOperation,success,message;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setSpinner(true);_context.next=3;return _regeneratorRuntime.awrap(checkOperationPassword({stores:stores,password:password}));case 3:_await$checkOperation=_context.sent;success=_await$checkOperation.success;message=_await$checkOperation.message;setSpinner(false);if(success){onDismiss(password);}else{setError(t(message||'Error.IncorrectOPPassword'));}case 8:case\"end\":return _context.stop();}}},null,null,null,Promise);};return _jsxs(Modal,{isVisible:show,children:[_jsx(Spinner,{visible:spinner,color:'red',size:'large',overlayColor:'rgba(0, 0, 0, 0.25)'}),_jsxs(View,{style:styleSheet.view,children:[_jsx(Text,{style:styleSheet.title,children:t('Record.ST8')}),_jsx(Item,{style:styleSheet.item,children:_jsx(Input,{autoFocus:true,placeholder:t('Record.ST9'),secureTextEntry:true,style:styleSheet.input,onChangeText:onPasswordChange,value:password,onSubmitEditing:function onSubmitEditing(e){onSubmit(e.nativeEvent.text);}})}),error?_jsx(View,{style:styleSheet.errorContainer,children:_jsx(Text,{style:styleSheet.errorText,children:error})}):undefined,_jsxs(View,{style:styleSheet.actionContainer,children:[_jsx(View,{style:styleSheet.button,children:_jsx(MCCButton,{onPress:onCancel,color:\"grey\",text:t('Common.Cancel')})}),_jsx(View,{style:styleSheet.button,children:_jsx(MCCButton,{onPress:onConfirm,text:t('Common.Confirm')})})]})]})]});};var styleSheet=StyleSheet.create({view:{backgroundColor:'white',justifyContent:'center',alignItems:'center',borderRadius:10,paddingTop:10,paddingBottom:10},button:{justifyContent:'center',marginHorizontal:5,flex:1},title:{marginVertical:10,fontSize:24},text:{fontSize:20},item:{borderColor:'rgba(0,0,0,0.5)',marginLeft:20,marginRight:20,marginBottom:10},input:{textAlign:'center',fontSize:22},errorContainer:{marginBottom:10},errorText:{color:'red'},actionContainer:{flexDirection:'row',marginTop:5}});export default OPModal;","map":{"version":3,"names":["Input","Item","View","React","useEffect","useState","useTranslation","Spinner","Modal","checkOperationPassword","useStores","MCCButton","OPModal","show","onDismiss","t","stores","password","setPassword","spinner","setSpinner","error","setError","onPasswordChange","onSubmit","onCancel","onConfirm","success","message","styleSheet","view","title","item","input","e","nativeEvent","text","errorContainer","errorText","undefined","actionContainer","button","StyleSheet","create","backgroundColor","justifyContent","alignItems","borderRadius","paddingTop","paddingBottom","marginHorizontal","flex","marginVertical","fontSize","borderColor","marginLeft","marginRight","marginBottom","textAlign","color","flexDirection","marginTop"],"sources":["I:/Workspace/mediWS/mccWS/frontend-clinic-app/src/components/opModal/index.tsx"],"sourcesContent":["import { Input, Item, View } from 'native-base';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { StyleSheet, Text } from 'react-native';\r\nimport Spinner from 'react-native-loading-spinner-overlay';\r\nimport Modal from 'react-native-modal';\r\nimport { checkOperationPassword } from '../../actions/auth';\r\nimport { useStores } from '../../stores';\r\nimport MCCButton from '../mccButton';\r\n\r\ntype OPModalProp = {\r\n    show: boolean,\r\n    onDismiss: (result: string) => void\r\n}\r\n\r\nconst OPModal = ({ show, onDismiss }: OPModalProp) => {\r\n    const { t } = useTranslation();\r\n    const stores = useStores();\r\n    const [password, setPassword] = useState('');\r\n    const [spinner, setSpinner] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    useEffect(() => {\r\n        setPassword('');\r\n        setError('');\r\n    }, [show]);\r\n\r\n    const onPasswordChange = (password: string) => {\r\n        setPassword(password);\r\n    }\r\n\r\n    const onSubmit = (password: string) => {\r\n        setPassword(password);\r\n    }\r\n\r\n    const onCancel = () => {\r\n        onDismiss('');\r\n    }\r\n\r\n    const onConfirm = async () => {\r\n        setSpinner(true);\r\n        const { success, message } = await checkOperationPassword({ stores, password });\r\n        setSpinner(false);\r\n        if (success) {\r\n            onDismiss(password);\r\n        }\r\n        else {\r\n            setError(t(message || 'Error.IncorrectOPPassword'));\r\n        }\r\n    }\r\n    return (\r\n        <Modal isVisible={show}>\r\n            <Spinner\r\n                visible={spinner}\r\n                color={'red'}\r\n                size={'large'}\r\n                overlayColor={'rgba(0, 0, 0, 0.25)'}\r\n            />\r\n            <View style={styleSheet.view}>\r\n                <Text style={styleSheet.title}>{t('Record.ST8')}</Text>\r\n                <Item\r\n                    style={styleSheet.item}\r\n                >\r\n                    <Input\r\n                        autoFocus={true}\r\n                        placeholder={t('Record.ST9')}\r\n                        secureTextEntry={true}\r\n                        style={styleSheet.input}\r\n                        onChangeText={onPasswordChange}\r\n                        value={password}\r\n                        onSubmitEditing={(e) => {\r\n                            onSubmit(e.nativeEvent.text);\r\n                        }}\r\n                    />\r\n                </Item>\r\n                {\r\n                    error ? (\r\n                        <View style={styleSheet.errorContainer}>\r\n                            <Text style={styleSheet.errorText}>{error}</Text>\r\n                        </View>\r\n                    ) : undefined\r\n                }\r\n                <View\r\n                    style={styleSheet.actionContainer}\r\n                >\r\n                    <View style={styleSheet.button}>\r\n                        <MCCButton\r\n                            onPress={onCancel}\r\n                            color='grey'\r\n                            text={t('Common.Cancel')}\r\n                        />\r\n                    </View>\r\n                    <View style={styleSheet.button}>\r\n                        <MCCButton\r\n                            onPress={onConfirm}\r\n                            text={t('Common.Confirm')}\r\n                        />\r\n                    </View>\r\n                </View>\r\n            </View>\r\n        </Modal>\r\n    )\r\n};\r\n\r\nconst styleSheet = StyleSheet.create({\r\n    view: {\r\n        backgroundColor: 'white',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderRadius: 10,\r\n        paddingTop: 10,\r\n        paddingBottom: 10,\r\n    },\r\n    button: {\r\n        justifyContent: 'center',\r\n        marginHorizontal: 5,\r\n        flex: 1,\r\n    },\r\n    title: {\r\n        marginVertical: 10,\r\n        fontSize: 24\r\n    },\r\n    text: {\r\n        fontSize: 20\r\n    },\r\n    item: {\r\n        borderColor: 'rgba(0,0,0,0.5)',\r\n        marginLeft: 20,\r\n        marginRight: 20,\r\n        marginBottom: 10,\r\n    },\r\n    input: {\r\n        textAlign: 'center',\r\n        fontSize: 22\r\n    },\r\n    errorContainer: {\r\n        marginBottom: 10\r\n    },\r\n    errorText: {\r\n        color: 'red'\r\n    },\r\n    actionContainer: {\r\n        flexDirection: 'row',\r\n        marginTop: 5,\r\n    }\r\n});\r\n\r\nexport default OPModal;"],"mappings":"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"},"metadata":{},"sourceType":"module"}