{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import React,{useState}from'react';import{observer}from'mobx-react';import{Container,Item,Input,View,Text}from'native-base';import TitleBar from\"../../components/titleBar\";import{useTranslation}from'react-i18next';import{useNavigation}from'@react-navigation/native';import Alert from\"react-native-web/dist/exports/Alert\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import MCCButton from\"../../components/mccButton\";import{useStores}from\"../../stores\";import{changePassword}from\"../../actions/app\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import PhoneCall from\"../../components/phoneCall\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _Dimensions$get=Dimensions.get('window'),height=_Dimensions$get.height,width=_Dimensions$get.width;var ChangePasswordPage=observer(function(){var stores=useStores();var _useTranslation=useTranslation(),i18n=_useTranslation.i18n,t=_useTranslation.t;var navigation=useNavigation();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),OldPassword=_useState2[0],setOldPassword=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),NewPassword=_useState4[0],setNewPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),NewPasswordComfirme=_useState6[0],setNewPasswordComfirm=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var onOldPasswordChange=function onOldPasswordChange(value){setOldPassword(value);};var onNewPasswordChange=function onNewPasswordChange(value){setNewPassword(value);};var onNewPasswordConfirmChange=function onNewPasswordConfirmChange(value){setNewPasswordComfirm(value);};var onChangePassword=function _callee(){var _stores$appStore,clinicId,token,message;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(NewPassword!==NewPasswordComfirme)){_context.next=4;break;}Alert.alert(t('Others.NewPasswordNotMatch'));_context.next=9;break;case 4:_stores$appStore=stores.appStore,clinicId=_stores$appStore.clinicId,token=_stores$appStore.token;_context.next=7;return _regeneratorRuntime.awrap(changePassword({stores:stores,clinicId:clinicId,oldPassword:OldPassword,newPassword:NewPassword,token:token,i18n:i18n}));case 7:message=_context.sent;if(message===true){Alert.alert(t('Others.PasswordResetSuccess'));}else{Alert.alert(t('Others.WrongOldPassword'));}case 9:case\"end\":return _context.stop();}}},null,null,null,Promise);};return _jsxs(Container,{children:[_jsx(TitleBar,{title:t('Others.ST11'),onBack:function onBack(){navigation.goBack();}}),_jsx(Text,{children:\"  \"}),_jsxs(View,{style:styleSheet.view,children:[_jsx(Item,{rounded:true,style:styleSheet.textInput,children:_jsx(Input,{onChangeText:onOldPasswordChange,placeholder:t('Others.OldPassword'),placeholderTextColor:\"#a4a4a4\",style:styleSheet.input,autoCapitalize:\"none\",secureTextEntry:true})}),_jsx(Item,{rounded:true,style:styleSheet.textInput,children:_jsx(Input,{onChangeText:onNewPasswordChange,placeholder:t('Others.NewPassword'),placeholderTextColor:\"#a4a4a4\",style:styleSheet.input,autoCapitalize:\"none\"})}),_jsx(Item,{rounded:true,style:styleSheet.textInput,children:_jsx(Input,{onChangeText:onNewPasswordConfirmChange,placeholder:t('Others.NewPasswordConfirm'),placeholderTextColor:\"#a4a4a4\",style:styleSheet.input,autoCapitalize:\"none\"})}),_jsx(MCCButton,{onPress:onChangePassword,text:t('Others.PasswordReset')})]}),_jsx(PhoneCall,{})]});});var styleSheet=StyleSheet.create({container:{backgroundColor:'#fff'},title:{color:'#f95e56',fontSize:14},input:{fontSize:16},view:{alignItems:'center'},textInput:{backgroundColor:'#FFFFFF',width:width*0.90,shadowRadius:5,marginBottom:20,borderColor:'#a4a4a4',color:'#a4a4a4'}});export default ChangePasswordPage;","map":{"version":3,"names":["React","useState","observer","Container","Item","Input","View","Text","TitleBar","useTranslation","useNavigation","MCCButton","useStores","changePassword","PhoneCall","Dimensions","get","height","width","ChangePasswordPage","stores","i18n","t","navigation","OldPassword","setOldPassword","NewPassword","setNewPassword","NewPasswordComfirme","setNewPasswordComfirm","loading","setLoading","error","setError","onOldPasswordChange","value","onNewPasswordChange","onNewPasswordConfirmChange","onChangePassword","Alert","alert","appStore","clinicId","token","oldPassword","newPassword","message","goBack","styleSheet","view","textInput","input","StyleSheet","create","container","backgroundColor","title","color","fontSize","alignItems","shadowRadius","marginBottom","borderColor"],"sources":["I:/Workspace/mediWS/mccWS/frontend-clinic-app/src/pages/changePassword/index.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport Spinner from 'react-native-loading-spinner-overlay';\r\nimport { Container, Item, Input, View, Text } from 'native-base';\r\nimport TitleBar from '../../components/titleBar';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { Alert, StyleSheet } from 'react-native';\r\nimport styles from '../../styles';\r\nimport MCCButton from '../../components/mccButton';\r\nimport { useStores } from '../../stores';\r\nimport { changePassword } from '../../actions/app';\r\nimport { Dimensions } from \"react-native\";\r\nimport PhoneCall from \"../../components/phoneCall\";\r\n\r\nvar { height, width } = Dimensions.get('window');\r\n\r\nconst ChangePasswordPage = observer(() => {\r\n    const stores = useStores();\r\n    const { i18n, t } = useTranslation();\r\n    const navigation = useNavigation();\r\n\r\n    const [OldPassword, setOldPassword] = useState('');\r\n    const [NewPassword, setNewPassword] = useState('');\r\n    const [NewPasswordComfirme, setNewPasswordComfirm] = useState('');\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n\r\n    const onOldPasswordChange = (value: string) => {\r\n        setOldPassword(value)\r\n    }\r\n\r\n    const onNewPasswordChange = (value: string) => {\r\n        setNewPassword(value)\r\n    }\r\n\r\n    const onNewPasswordConfirmChange = (value: string) => {\r\n        setNewPasswordComfirm(value)\r\n    }\r\n\r\n\r\n\r\n    const onChangePassword = async () => {\r\n\r\n        if (NewPassword !== NewPasswordComfirme) {\r\n            Alert.alert(t('Others.NewPasswordNotMatch'));\r\n        } else {\r\n            const { clinicId, token } = stores.appStore;\r\n            const message = await changePassword({ stores, clinicId, oldPassword: OldPassword, newPassword: NewPassword, token, i18n });\r\n            if (message === true) {\r\n                Alert.alert(t('Others.PasswordResetSuccess'));\r\n            } else {\r\n                Alert.alert(t('Others.WrongOldPassword'));\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <Container>\r\n            <TitleBar\r\n                title={t('Others.ST11')}\r\n                onBack={() => { navigation.goBack(); }}\r\n            />\r\n            <Text>  </Text>\r\n            <View style={styleSheet.view}>\r\n                <Item rounded style={styleSheet.textInput}>\r\n\r\n                    <Input\r\n                        onChangeText={onOldPasswordChange}\r\n                        placeholder={t('Others.OldPassword')}\r\n                        placeholderTextColor='#a4a4a4'\r\n                        style={styleSheet.input}\r\n                        autoCapitalize='none'\r\n                        secureTextEntry={true}\r\n                    />\r\n                </Item>\r\n\r\n                <Item rounded style={styleSheet.textInput}>\r\n                    <Input\r\n                        onChangeText={onNewPasswordChange}\r\n                        placeholder={t('Others.NewPassword')}\r\n                        placeholderTextColor='#a4a4a4'\r\n                        style={styleSheet.input}\r\n                        autoCapitalize='none'\r\n                    />\r\n                </Item>\r\n                <Item rounded style={styleSheet.textInput}>\r\n\r\n                    <Input\r\n                        onChangeText={onNewPasswordConfirmChange}\r\n                        placeholder={t('Others.NewPasswordConfirm')}\r\n                        placeholderTextColor='#a4a4a4'\r\n                        style={styleSheet.input}\r\n                        autoCapitalize='none'\r\n                    />\r\n                </Item>\r\n\r\n                <MCCButton onPress={onChangePassword} text={t('Others.PasswordReset')} />\r\n\r\n            </View>\r\n\r\n            <PhoneCall/>\r\n        </Container>)\r\n});\r\n\r\nconst styleSheet = StyleSheet.create({\r\n    container: {\r\n        backgroundColor: '#fff'\r\n    },\r\n    title: {\r\n        color: '#f95e56',\r\n        fontSize: 14\r\n    },\r\n    input: {\r\n        fontSize: 16\r\n    },\r\n    view: {\r\n        alignItems: 'center'\r\n    },\r\n    textInput: {\r\n        backgroundColor: '#FFFFFF',\r\n        width: width * 0.90,\r\n        shadowRadius: 5,\r\n        marginBottom: 20,\r\n        borderColor: '#a4a4a4',\r\n        color: '#a4a4a4'\r\n\r\n    }\r\n})\r\n\r\nexport default ChangePasswordPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}