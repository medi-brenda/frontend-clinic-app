{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"I:\\\\Workspace\\\\mediWS\\\\mccWS\\\\frontend-clinic-app\\\\src\\\\pages\\\\selectInsurers\\\\index.tsx\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useNavigation } from '@react-navigation/native';\nimport { observer } from 'mobx-react';\nimport { Container } from 'native-base';\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { goSelectBenefit } from \"../../actions/app\";\nimport { getInsurersByClinic } from \"../../actions/config\";\nimport List from \"../../components/list\";\nimport TitleBar from \"../../components/titleBar\";\nimport { useStores } from \"../../stores\";\nimport ErrorPage from \"../error\";\nimport Loading from \"../loading\";\nimport PhoneCall from \"../../components/phoneCall\";\nvar SelectInsurerPage = observer(function () {\n  var stores = useStores();\n\n  var _useTranslation = useTranslation(),\n      i18n = _useTranslation.i18n,\n      t = _useTranslation.t;\n\n  var navigation = useNavigation();\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      inited = _useState4[0],\n      setInited = _useState4[1];\n\n  var currentTab = stores.appStore.currentTab;\n  var insurers = stores.configStore.insurers;\n  useEffect(function () {\n    init();\n  }, []);\n\n  var init = function init() {\n    var errMsg;\n    return _regeneratorRuntime.async(function init$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(getInsurersByClinic({\n              stores: stores,\n              i18n: i18n\n            }));\n\n          case 2:\n            errMsg = _context.sent;\n\n            if (!errMsg) {\n              _context.next = 5;\n              break;\n            }\n\n            return _context.abrupt(\"return\", setError(errMsg));\n\n          case 5:\n            return _context.abrupt(\"return\", setInited(true));\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var onItemSelect = function onItemSelect(item) {\n    var insurerName;\n\n    if (i18n.language == 'chi') {\n      if (item.code == '6') insurerName = '中國人壽 傳統團體';else if (item.code == '7') insurerName = '中國人壽 醫加';else insurerName = item.nameChi.split('(')[0].trim();\n    } else {\n      if (item.code == '6') insurerName = 'China Life Group Medical';else if (item.code == '7') insurerName = 'China Life MediPlus';else insurerName = item.name;\n    }\n\n    goSelectBenefit({\n      stores: stores,\n      navigation: navigation,\n      insurer: item.code,\n      insurerName: insurerName\n    });\n  };\n\n  return React.createElement(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, React.createElement(TitleBar, {\n    title: t(currentTab + \".SelectInsurer\"),\n    onBack: function onBack() {\n      navigation.reset({\n        index: 0,\n        routes: [{\n          name: 'Home'\n        }]\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }), error ? React.createElement(ErrorPage, {\n    title: error,\n    onRetry: init,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }) : !inited ? React.createElement(Loading, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 31\n    }\n  }) : React.createElement(List, {\n    data: insurers,\n    icon: \"ios-arrow-forward\",\n    onPress: onItemSelect,\n    formatText: function formatText(item) {\n      if (item.code == '6') return '中國人壽 傳統團體 (China Life Group Medical)';else if (item.code == '7') return '中國人壽 醫加 (China Life MediPlus)';\n      return item.nameChi.split('(')[0].trim() + \" (\" + item.nameEn.split('(')[0].trim() + \")\";\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  }), React.createElement(PhoneCall, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }));\n});\nvar styleSheet = StyleSheet.create({});\nexport default SelectInsurerPage;","map":{"version":3,"names":["useNavigation","observer","Container","React","useEffect","useState","useTranslation","goSelectBenefit","getInsurersByClinic","List","TitleBar","useStores","ErrorPage","Loading","PhoneCall","SelectInsurerPage","stores","i18n","t","navigation","error","setError","inited","setInited","currentTab","appStore","insurers","configStore","init","errMsg","onItemSelect","item","insurerName","language","code","nameChi","split","trim","name","insurer","reset","index","routes","nameEn","styleSheet","StyleSheet","create"],"sources":["I:/Workspace/mediWS/mccWS/frontend-clinic-app/src/pages/selectInsurers/index.tsx"],"sourcesContent":["import { useNavigation } from '@react-navigation/native';\r\nimport { observer } from 'mobx-react';\r\nimport { Container, View } from 'native-base';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Alert, StyleSheet } from 'react-native';\r\nimport { goSelectBenefit } from '../../actions/app';\r\nimport { getInsurersByClinic } from '../../actions/config';\r\nimport List from '../../components/list';\r\nimport TitleBar from '../../components/titleBar';\r\nimport { Insurer } from '../../models/insurer';\r\nimport { useStores } from '../../stores';\r\nimport { translate } from '../../utils/string';\r\nimport ErrorPage from '../error';\r\nimport Loading from '../loading';\r\nimport PhoneCall from \"../../components/phoneCall\";\r\n\r\n\r\nconst SelectInsurerPage = observer(() => {\r\n    const stores = useStores();\r\n    const { i18n, t } = useTranslation();\r\n    const navigation = useNavigation();\r\n\r\n    const [error, setError] = useState('');\r\n    const [inited, setInited] = useState(false);\r\n\r\n    const { currentTab } = stores.appStore;\r\n    const { insurers } = stores.configStore;\r\n\r\n    useEffect(() => {\r\n        init();\r\n    }, []);\r\n\r\n    const init = async () => {\r\n        const errMsg = await getInsurersByClinic({ stores, i18n });\r\n        if (errMsg) {\r\n            return setError(errMsg);\r\n        }\r\n        return setInited(true);\r\n    }\r\n\r\n    const onItemSelect = (item: Insurer) => {\r\n        let insurerName;\r\n        if (i18n.language=='chi'){\r\n            if (item.code=='6')\r\n                insurerName='中國人壽 傳統團體'\r\n            else if (item.code=='7')\r\n                insurerName='中國人壽 醫加'\r\n            else\r\n                insurerName=item.nameChi.split('(')[0].trim();\r\n        }else{\r\n            if (item.code=='6')\r\n                insurerName='China Life Group Medical'\r\n            else if (item.code=='7')\r\n                insurerName='China Life MediPlus'\r\n            else\r\n                insurerName=item.name\r\n        }\r\n        goSelectBenefit({\r\n            stores,\r\n            navigation,\r\n            insurer: item.code,\r\n            insurerName\r\n        });\r\n    }\r\n    return (\r\n        <Container>\r\n            <TitleBar\r\n                title={t(`${currentTab}.SelectInsurer`)}\r\n                onBack={() => {\r\n                    navigation.reset({\r\n                        index: 0,\r\n                        routes: [{ name: 'Home' }]\r\n                    });\r\n                }}\r\n            />\r\n            {\r\n                error ?\r\n                    <ErrorPage title={error} onRetry={init} /> :\r\n                    !inited ? <Loading /> :\r\n                        <List\r\n                            data={insurers}\r\n                            icon='ios-arrow-forward'\r\n                            onPress={onItemSelect}\r\n                            formatText={(item) =>\r\n                                {\r\n                                    if (item.code=='6')\r\n                                        return '中國人壽 傳統團體 (China Life Group Medical)'\r\n                                    else if (item.code=='7')\r\n                                        return '中國人壽 醫加 (China Life MediPlus)'\r\n                                    return `${item.nameChi.split('(')[0].trim()} (${item.nameEn.split('(')[0].trim()})`\r\n                                }\r\n                            }\r\n                        />\r\n            }\r\n\r\n            <PhoneCall/>\r\n        </Container>\r\n    )\r\n});\r\n\r\nconst styleSheet = StyleSheet.create({\r\n});\r\n\r\nexport default SelectInsurerPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}