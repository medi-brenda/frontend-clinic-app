{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"I:\\\\Workspace\\\\mediWS\\\\mccWS\\\\frontend-clinic-app\\\\src\\\\pages\\\\selectBenefits\\\\index.tsx\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useNavigation } from '@react-navigation/native';\nimport { observer } from 'mobx-react';\nimport { Container } from 'native-base';\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { goSelectDoctor } from \"../../actions/app\";\nimport { getBenefitsByClinicInsurer } from \"../../actions/config\";\nimport List from \"../../components/list\";\nimport TitleBar from \"../../components/titleBar\";\nimport { useStores } from \"../../stores\";\nimport { translate } from \"../../utils/string\";\nimport ErrorPage from \"../error\";\nimport Loading from \"../loading\";\nimport PhoneCall from \"../../components/phoneCall\";\nvar SelectBenefitPage = observer(function () {\n  var stores = useStores();\n\n  var _useTranslation = useTranslation(),\n      i18n = _useTranslation.i18n,\n      t = _useTranslation.t;\n\n  var navigation = useNavigation();\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      inited = _useState4[0],\n      setInited = _useState4[1];\n\n  var currentTab = stores.appStore.currentTab;\n  var benefits = stores.configStore.benefits;\n  useEffect(function () {\n    init();\n  }, []);\n\n  var init = function init() {\n    var errMsg;\n    return _regeneratorRuntime.async(function init$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(getBenefitsByClinicInsurer({\n              stores: stores\n            }));\n\n          case 2:\n            errMsg = _context.sent;\n\n            if (!errMsg) {\n              _context.next = 5;\n              break;\n            }\n\n            return _context.abrupt(\"return\", setError(errMsg));\n\n          case 5:\n            return _context.abrupt(\"return\", setInited(true));\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var onItemSelect = function onItemSelect(item) {\n    goSelectDoctor({\n      stores: stores,\n      navigation: navigation,\n      benefit: item.code,\n      benefitName: i18n.language == 'chi' ? item.nameChi : item.nameEn\n    });\n  };\n\n  return React.createElement(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, React.createElement(TitleBar, {\n    title: t(currentTab + \".SelectBenefit\"),\n    onBack: function onBack() {\n      navigation.goBack();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }), error ? React.createElement(ErrorPage, {\n    title: error,\n    onRetry: init,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  }) : !inited ? React.createElement(Loading, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 31\n    }\n  }) : React.createElement(React.Fragment, null, React.createElement(Text, {\n    style: styleSheet.breadcrumb,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 25\n    }\n  }, t(currentTab + \".Selected\") + ': ' + stores.dataStore.values.insurerName), React.createElement(List, {\n    data: benefits,\n    icon: \"ios-arrow-forward\",\n    onPress: onItemSelect,\n    formatText: function formatText(item) {\n      return translate(item, i18n) + \"(\" + item.code + \")\";\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  })), React.createElement(PhoneCall, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }));\n});\nvar styleSheet = StyleSheet.create({\n  breadcrumb: {\n    marginLeft: 20,\n    marginTop: 5,\n    color: \"#777777\"\n  }\n});\nexport default SelectBenefitPage;","map":{"version":3,"names":["useNavigation","observer","Container","React","useEffect","useState","useTranslation","goSelectDoctor","getBenefitsByClinicInsurer","List","TitleBar","useStores","translate","ErrorPage","Loading","PhoneCall","SelectBenefitPage","stores","i18n","t","navigation","error","setError","inited","setInited","currentTab","appStore","benefits","configStore","init","errMsg","onItemSelect","item","benefit","code","benefitName","language","nameChi","nameEn","goBack","styleSheet","breadcrumb","dataStore","values","insurerName","StyleSheet","create","marginLeft","marginTop","color"],"sources":["I:/Workspace/mediWS/mccWS/frontend-clinic-app/src/pages/selectBenefits/index.tsx"],"sourcesContent":["import { useNavigation } from '@react-navigation/native';\r\nimport { observer } from 'mobx-react';\r\nimport { Container, View } from 'native-base';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Alert, StyleSheet, Text } from 'react-native';\r\nimport { goSelectDoctor } from '../../actions/app';\r\nimport { getBenefitsByClinicInsurer } from '../../actions/config';\r\nimport List from '../../components/list';\r\nimport TitleBar from '../../components/titleBar';\r\nimport { Option } from '../../models/option';\r\nimport { useStores } from '../../stores';\r\nimport { translate } from '../../utils/string';\r\nimport ErrorPage from '../error';\r\nimport Loading from '../loading';\r\nimport PhoneCall from \"../../components/phoneCall\";\r\nimport styles from '../../styles';\r\nimport { I18nManager } from 'react-native';\r\n\r\nconst SelectBenefitPage = observer(() => {\r\n    const stores = useStores();\r\n    const { i18n, t } = useTranslation();\r\n    const navigation = useNavigation();\r\n\r\n    const [error, setError] = useState('');\r\n    const [inited, setInited] = useState(false);\r\n\r\n    const { currentTab } = stores.appStore;\r\n    const { benefits } = stores.configStore;\r\n\r\n    useEffect(() => {\r\n        init();\r\n    }, []);\r\n\r\n    const init = async () => {\r\n        const errMsg = await getBenefitsByClinicInsurer({ stores });\r\n        if (errMsg) {\r\n            return setError(errMsg);\r\n        }\r\n        return setInited(true);\r\n    }    \r\n\r\n    const onItemSelect = (item: Option) => {\r\n        goSelectDoctor({\r\n            stores,\r\n            navigation,\r\n            benefit: item.code,\r\n            benefitName: i18n.language=='chi'?item.nameChi:item.nameEn            \r\n        });\r\n    }\r\n    return (\r\n        <Container>\r\n            <TitleBar\r\n                title={t(`${currentTab}.SelectBenefit`)}\r\n                onBack={() => {\r\n                    navigation.goBack();\r\n                }}\r\n            />\r\n            {\r\n                error ?\r\n                    <ErrorPage title={error} onRetry={init} /> :\r\n                    !inited ? <Loading /> :\r\n                    <>\r\n                        <Text style={styleSheet.breadcrumb}>{t(`${currentTab}.Selected`)+': '+stores.dataStore.values.insurerName}</Text>\r\n                        <List\r\n                            data={benefits}\r\n                            icon='ios-arrow-forward'\r\n                            onPress={onItemSelect}\r\n                            formatText={(item) => `${translate(item, i18n)}(${item.code})`}\r\n                        />\r\n                    </>\r\n            }\r\n\r\n            <PhoneCall/>\r\n        </Container>\r\n    )\r\n});\r\n\r\nconst styleSheet = StyleSheet.create({\r\n    breadcrumb:{\r\n        marginLeft: 20,\r\n        marginTop: 5,\r\n        color: \"#777777\"\r\n    }\r\n});\r\n\r\nexport default SelectBenefitPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}