{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"I:\\\\Workspace\\\\mediWS\\\\mccWS\\\\frontend-clinic-app\\\\src\\\\components\\\\inputImage\\\\index.tsx\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from 'react';\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Button } from 'native-base';\nimport * as ImagePicker from 'expo-image-picker';\nimport styles from \"../../styles\";\nimport { useTranslation } from 'react-i18next';\nimport * as Permissions from 'expo-permissions';\n\nvar _Dimensions$get = Dimensions.get('window'),\n    width = _Dimensions$get.width;\n\nvar maxImageWidth = width * 4 / 9;\nvar maxImageHeight = width * 4 / 9;\n\nvar InputImage = function InputImage(_ref) {\n  var id = _ref.id,\n      title = _ref.title,\n      values = _ref.values,\n      warning = _ref.warning,\n      validate = _ref.validate,\n      onChange = _ref.onChange;\n\n  var _useState = useState(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      ratio = _useState2[0],\n      setRatio = _useState2[1];\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var handleUpload = function handleUpload() {\n    var permission, result;\n    return _regeneratorRuntime.async(function handleUpload$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(Permissions.getAsync(Permissions.CAMERA_ROLL));\n\n          case 2:\n            permission = _context.sent;\n\n            if (!(permission.status !== \"granted\")) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA_ROLL));\n\n          case 6:\n            permission = _context.sent;\n\n          case 7:\n            if (!(permission.status !== \"granted\")) {\n              _context.next = 10;\n              break;\n            }\n\n            Alert.alert(t('Register.EntitlePermission'));\n            return _context.abrupt(\"return\");\n\n          case 10:\n            _context.next = 12;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              quality: 1\n            }));\n\n          case 12:\n            result = _context.sent;\n\n            if (!result.cancelled) {\n              onChange(id, result.uri);\n              setRatio(result.width / result.height);\n            }\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleTakePhoto = function handleTakePhoto() {\n    var permission, result;\n    return _regeneratorRuntime.async(function handleTakePhoto$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(Permissions.getAsync(Permissions.CAMERA));\n\n          case 2:\n            permission = _context2.sent;\n\n            if (!(permission.status !== \"granted\")) {\n              _context2.next = 7;\n              break;\n            }\n\n            _context2.next = 6;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA));\n\n          case 6:\n            permission = _context2.sent;\n\n          case 7:\n            if (!(permission.status !== \"granted\")) {\n              _context2.next = 10;\n              break;\n            }\n\n            Alert.alert(t('Register.EntitlePermission'));\n            return _context2.abrupt(\"return\");\n\n          case 10:\n            _context2.next = 12;\n            return _regeneratorRuntime.awrap(ImagePicker.launchCameraAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.Images,\n              allowsEditing: true,\n              quality: 1\n            }));\n\n          case 12:\n            result = _context2.sent;\n\n            if (!result.cancelled) {\n              onChange(id, result.uri);\n              setRatio(result.width / result.height);\n            }\n\n          case 14:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var isError = !validate(values[id]);\n  return React.createElement(React.Fragment, null, React.createElement(Text, {\n    style: styles.reg_field_title,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, title), !values[id] ? React.createElement(Text, {\n    style: styleSheet.warning,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }, warning) : null, React.createElement(View, {\n    style: styleSheet.image,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, values && values[id] ? React.createElement(Image, {\n    style: {\n      marginBottom: 15,\n      width: ratio > 1 ? maxImageWidth : maxImageWidth * ratio,\n      height: ratio < 1 ? maxImageHeight : maxImageHeight * ratio\n    },\n    source: {\n      uri: values[id]\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 25\n    }\n  }) : null, React.createElement(Button, {\n    rounded: true,\n    block: true,\n    style: styles.button_auth,\n    onPress: handleTakePhoto,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: styleSheet.button,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }\n  }, t('Register.TakePhoto')))));\n};\n\nvar styleSheet = StyleSheet.create({\n  warning: {\n    fontSize: 14,\n    marginLeft: 10,\n    marginRight: 5,\n    marginBottom: 25,\n    color: 'red'\n  },\n  image: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 20\n  },\n  button: {\n    color: 'white',\n    fontSize: 16\n  }\n});\nexport default InputImage;","map":{"version":3,"names":["React","useState","Button","ImagePicker","styles","useTranslation","Permissions","Dimensions","get","width","maxImageWidth","maxImageHeight","InputImage","id","title","values","warning","validate","onChange","ratio","setRatio","t","handleUpload","getAsync","CAMERA_ROLL","permission","status","askAsync","Alert","alert","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","quality","result","cancelled","uri","height","handleTakePhoto","CAMERA","launchCameraAsync","Images","isError","reg_field_title","styleSheet","image","marginBottom","button_auth","button","StyleSheet","create","fontSize","marginLeft","marginRight","color","justifyContent","alignItems"],"sources":["I:/Workspace/mediWS/mccWS/frontend-clinic-app/src/components/inputImage/index.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nimport { Dimensions, Image, View, Text, StyleSheet, Alert } from 'react-native';\r\nimport { Button, Container } from 'native-base';\r\nimport { Col, Row, Grid } from 'react-native-easy-grid';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport styles from '../../styles';\r\nimport { useTranslation } from 'react-i18next';\r\nimport * as Permissions from 'expo-permissions';\r\n\r\nconst { width } = Dimensions.get('window');\r\n\r\nconst maxImageWidth = (width * 4) / 9;\r\nconst maxImageHeight = (width * 4) / 9;\r\n\r\ntype InputImageProp = {\r\n    id: string,\r\n    title: string,\r\n    values: any,\r\n    warning: string,\r\n    validate: (value: any) => boolean,\r\n    onChange: (id: string, value: any) => void\r\n}\r\n\r\nconst InputImage = ({ id, title, values, warning, validate, onChange }: InputImageProp) => {\r\n    const [ratio, setRatio] = useState(1);\r\n    const { t } = useTranslation();\r\n\r\n    const handleUpload = async () => {\r\n\r\n        let permission = await Permissions.getAsync(Permissions.CAMERA_ROLL);\r\n        if (permission.status !== \"granted\") permission = await Permissions.askAsync(Permissions.CAMERA_ROLL);\r\n        \r\n        if (permission.status !== \"granted\") {\r\n            Alert.alert(t('Register.EntitlePermission'));\r\n            return;\r\n        }\r\n\r\n        const result = await ImagePicker.launchImageLibraryAsync({\r\n            mediaTypes: ImagePicker.MediaTypeOptions.All,\r\n            allowsEditing: true,\r\n            quality: 1,\r\n        });\r\n\r\n        if (!result.cancelled) {\r\n            onChange(id, result.uri);\r\n            setRatio(result.width / result.height);\r\n        }\r\n    }\r\n\r\n    const handleTakePhoto = async () => {\r\n        let permission = await Permissions.getAsync(Permissions.CAMERA);\r\n        if (permission.status !== \"granted\") permission = await Permissions.askAsync(Permissions.CAMERA);\r\n        \r\n        if (permission.status !== \"granted\") {\r\n            Alert.alert(t('Register.EntitlePermission'));\r\n            return;\r\n        }\r\n\r\n        const result = await ImagePicker.launchCameraAsync({\r\n            mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n            allowsEditing: true,\r\n            quality: 1,\r\n        });\r\n\r\n        if (!result.cancelled) {\r\n            onChange(id, result.uri);\r\n            setRatio(result.width / result.height);\r\n        }\r\n    }\r\n\r\n    const isError = !validate(values[id]);\r\n\r\n    return (\r\n        <>\r\n            <Text style={styles.reg_field_title}>{title}</Text>\r\n            {\r\n                !values[id] ? (\r\n                    <Text style={styleSheet.warning}>{warning}</Text>\r\n                ) : null\r\n            }\r\n            <View style={styleSheet.image}>\r\n                {\r\n                    values && values[id] ? (\r\n                        <Image\r\n                            style={{\r\n                                marginBottom: 15,\r\n                                width: ratio > 1 ? maxImageWidth : maxImageWidth * ratio,\r\n                                height: ratio < 1 ? maxImageHeight : maxImageHeight * ratio\r\n                            }}\r\n                            source={{\r\n                                uri: values[id]\r\n                            }}\r\n                        />\r\n                    ) : null\r\n                }\r\n\r\n                \r\n                {/* <Button\r\n                    rounded\r\n                    block\r\n                    style={styles.button_auth}\r\n                    onPress={handleUpload}\r\n                >\r\n                    <Text style={styleSheet.button}>{t('Register.Upload')}</Text>\r\n                </Button> */}\r\n                <Button\r\n                    rounded\r\n                    block\r\n                    style={styles.button_auth}\r\n                    onPress={handleTakePhoto}\r\n                >\r\n                    <Text style={styleSheet.button}>{t('Register.TakePhoto')}</Text>\r\n                </Button>\r\n            </View>\r\n        </>\r\n    )\r\n}\r\n\r\nconst styleSheet = StyleSheet.create({\r\n    warning: {\r\n        fontSize: 14,\r\n        marginLeft: 10,\r\n        marginRight: 5,\r\n        marginBottom: 25,\r\n        color: 'red',\r\n    },\r\n    image: {\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        marginBottom: 20,\r\n    },\r\n    button: {\r\n        color: 'white',\r\n        fontSize: 16\r\n    }\r\n})\r\n\r\nexport default InputImage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}